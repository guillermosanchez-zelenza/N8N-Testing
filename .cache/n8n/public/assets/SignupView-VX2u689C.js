import{A as a}from"./AuthView-kdo3aJG-.js";import{e as s,V as r,f as n,u,_ as p}from"./n8n-_nNvRoCf.js";import{m as l}from"./pinia-aUqqC48i.js";import{G as m,ag as h,l as c,M as d}from"./vendor-NNwioulI.js";import"./index-xP-VuMjv.js";import"./@n8n/codemirror-lang-sql-feLn5IS9.js";import"./@lezer/common-1hBQ1gIF.js";import"./codemirror-lang-html-n8n-wWQLhhqk.js";import"./prettier-s3fE3Qyr.js";import"./@jsplumb/util-DR0SB56A.js";import"./@jsplumb/core-MKwKlGip.js";import"./@jsplumb/common-Q5_tv_GT.js";import"./@jsplumb/connector-bezier-3dWY17R5.js";import"./lodash-es-5z_C16pm.js";import"./@jsplumb/browser-ui-AlqFM-P6.js";import"./uuid-McvpxQtQ.js";import"./luxon-ZRIU05qF.js";import"./esprima-next-ulPLCZ1Z.js";import"./@vueuse/core-8g26_cc0.js";import"./codemirror-lang-n8n-expression-HpIZnV_9.js";import"./fast-json-stable-stringify-eHEaCv8s.js";import"./timeago.js--Bumj2r9.js";import"./qrcode.vue-UdCmS1Sj.js";import"./vue3-touch-events-_RfbPMOD.js";import"./chart.js-JtqvIvkt.js";import"./axios-s2RMMPhA.js";import"./flatted-jPn12Tq4.js";import"./vue-i18n-1PEMRmUU.js";import"./@n8n/permissions-8yMqUF1Y.js";const g=m({name:"SignupView",components:{AuthView:a},setup(){return{...s()}},data(){return{FORM_CONFIG:{title:this.$locale.baseText("auth.signup.setupYourAccount"),buttonText:this.$locale.baseText("auth.signup.finishAccountSetup"),inputs:[{name:"firstName",properties:{label:this.$locale.baseText("auth.firstName"),maxlength:32,required:!0,autocomplete:"given-name",capitalize:!0}},{name:"lastName",properties:{label:this.$locale.baseText("auth.lastName"),maxlength:32,required:!0,autocomplete:"family-name",capitalize:!0}},{name:"password",properties:{label:this.$locale.baseText("auth.password"),type:"password",validationRules:[{name:"DEFAULT_PASSWORD_RULES"}],required:!0,infoText:this.$locale.baseText("auth.defaultPasswordRequirements"),autocomplete:"new-password",capitalize:!0}},{name:"agree",properties:{label:this.$locale.baseText("auth.agreement.label"),type:"checkbox"}}]},loading:!1,inviter:null,inviterId:null,inviteeId:null}},async mounted(){const t=this.getQueryParameter("inviterId"),e=this.getQueryParameter("inviteeId");try{if(!t||!e)throw new Error(this.$locale.baseText("auth.signup.missingTokenError"));this.inviterId=t,this.inviteeId=e;const i=await this.usersStore.validateSignupToken({inviteeId:e,inviterId:t});this.inviter=i.inviter}catch(i){this.showError(i,this.$locale.baseText("auth.signup.tokenValidationError")),this.$router.replace({name:r.SIGNIN})}},computed:{...l(u,n),inviteMessage(){return this.inviter?this.$locale.baseText("settings.signup.signUpInviterInfo",{interpolate:{firstName:this.inviter.firstName,lastName:this.inviter.lastName}}):null}},methods:{async onSubmit(t){if(!this.inviterId||!this.inviteeId){this.showError(new Error(this.$locale.baseText("auth.signup.tokenValidationError")),this.$locale.baseText("auth.signup.setupYourAccountError"));return}try{if(this.loading=!0,await this.usersStore.acceptInvitation({...t,inviterId:this.inviterId,inviteeId:this.inviteeId}),t.agree===!0)try{await this.uiStore.submitContactEmail(t.email.toString(),t.agree)}catch{}await this.$router.push({name:r.NEW_WORKFLOW})}catch(e){this.showError(e,this.$locale.baseText("auth.signup.setupYourAccountError"))}this.loading=!1},getQueryParameter(t){return!this.$route.query[t]||typeof this.$route.query[t]!="string"?null:this.$route.query[t]}}});function f(t,e,i,b,v,I){const o=h("AuthView");return c(),d(o,{form:t.FORM_CONFIG,"form-loading":t.loading,subtitle:t.inviteMessage,onSubmit:t.onSubmit},null,8,["form","form-loading","subtitle","onSubmit"])}const j=p(g,[["render",f]]);export{j as default};
//# sourceMappingURL=SignupView-VX2u689C.js.map
