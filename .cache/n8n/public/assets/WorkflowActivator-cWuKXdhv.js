import{e as A,v as T,u as b,d5 as y,_ as S}from"./n8n-_nNvRoCf.js";import{w as f}from"./workflowActivate-taS2Qpdq.js";import{m as W}from"./pinia-aUqqC48i.js";import{G as _,ag as s,aq as $,l as r,m as v,p as n,M as k,O as e,S as u,R as c,I as N,T as a,V as C,Q as I}from"./vendor-NNwioulI.js";const E=_({name:"WorkflowActivator",mixins:[f],props:["workflowActive","workflowId"],setup(o,t){var i,l;return{...A(),...(l=(i=f).setup)==null?void 0:l.call(i,o,t)}},computed:{...W(b,T),nodesIssuesExist(){return this.workflowsStore.nodesIssuesExist},isWorkflowActive(){return this.workflowsStore.activeWorkflows.includes(this.workflowId)},couldNotBeStarted(){return this.workflowActive===!0&&this.isWorkflowActive!==this.workflowActive},getActiveColor(){return this.couldNotBeStarted?"#ff4949":"#13ce66"},isCurrentWorkflow(){return this.workflowsStore.workflowId===this.workflowId},disabled(){return!this.workflowId||this.isCurrentWorkflow?!this.workflowActive&&!this.containsTrigger:!1},containsTrigger(){return y(this.workflowsStore.workflowTriggerNodes).length>0}},methods:{async activeChanged(o){return await this.updateWorkflowActivation(this.workflowId,o)},async displayActivationError(){let o;try{const t=await this.workflowsStore.getActivationError(this.workflowId);t===void 0?o=this.$locale.baseText("workflowActivator.showMessage.displayActivationError.message.errorDataUndefined"):o=this.$locale.baseText("workflowActivator.showMessage.displayActivationError.message.errorDataNotUndefined",{interpolate:{message:t}})}catch{o=this.$locale.baseText("workflowActivator.showMessage.displayActivationError.message.catchBlock")}this.showMessage({title:this.$locale.baseText("workflowActivator.showMessage.displayActivationError.title"),message:o,type:"warning",duration:0,dangerouslyUseHTMLString:!0})}}}),M="_activeStatusText_1dwsh_5",B={activeStatusText:M},V={class:"workflow-activator"},D={key:0,class:"could-not-be-started"},U=["innerHTML"];function x(o,t,i,l,z,L){const w=s("n8n-text"),p=s("el-switch"),d=s("n8n-tooltip"),h=s("font-awesome-icon"),g=$("loading");return r(),v("div",V,[n("div",{class:N(o.$style.activeStatusText),"data-test-id":"workflow-activator-status"},[o.workflowActive?(r(),k(w,{key:0,color:o.couldNotBeStarted?"danger":"success",size:"small",bold:""},{default:e(()=>[u(c(o.$locale.baseText("workflowActivator.active")),1)]),_:1},8,["color"])):(r(),k(w,{key:1,color:"text-base",size:"small",bold:""},{default:e(()=>[u(c(o.$locale.baseText("workflowActivator.inactive")),1)]),_:1}))],2),a(d,{disabled:!o.disabled,placement:"bottom"},{content:e(()=>[n("div",null,c(o.$locale.baseText("workflowActivator.thisWorkflowHasNoTriggerNodes")),1)]),default:e(()=>[C(a(p,{"model-value":o.workflowActive,title:o.workflowActive?o.$locale.baseText("workflowActivator.deactivateWorkflow"):o.$locale.baseText("workflowActivator.activateWorkflow"),disabled:o.disabled||o.updatingWorkflowActivation,"active-color":o.getActiveColor,"inactive-color":"#8899AA","data-test-id":"workflow-activate-switch","onUpdate:modelValue":o.activeChanged},null,8,["model-value","title","disabled","active-color","onUpdate:modelValue"]),[[g,o.updatingWorkflowActivation]])]),_:1},8,["disabled"]),o.couldNotBeStarted?(r(),v("div",D,[a(d,{placement:"top"},{content:e(()=>[n("div",{onClick:t[0]||(t[0]=(...m)=>o.displayActivationError&&o.displayActivationError(...m)),innerHTML:o.$locale.baseText("workflowActivator.theWorkflowIsSetToBeActiveBut")},null,8,U)]),default:e(()=>[a(h,{icon:"exclamation-triangle",onClick:o.displayActivationError},null,8,["onClick"])]),_:1})])):I("",!0)])}const H={$style:B},R=S(E,[["render",x],["__cssModules",H],["__scopeId","data-v-13aaeab9"]]);export{R as W};
//# sourceMappingURL=WorkflowActivator-cWuKXdhv.js.map
