import{fu as E,b5 as w,az as D,af as $,eK as M,b as G,v as P,a5 as V,Z as W,b6 as K,y as U,q as H,d1 as z,eQ as j,f$ as F,g0 as Q,g1 as X,g2 as Z,cH as q,u as J,g3 as ee,g4 as oe,_ as te}from"./n8n-_nNvRoCf.js";import{K as x,aN as ne}from"./index-xP-VuMjv.js";import{u as L,t as se,s as re}from"./NodeView-e_zfgMVH.js";import{e as ae,a as ce,G as ie,aE as de,Z as le,ag as ue,l as v,m as R,I as g,p as Y,T as N,O as B,Q as pe,M as _e,u as fe,aG as Ne}from"./vendor-NNwioulI.js";const ye=()=>{const A=L(),l=ce(),S=[E.PLUS_ENDPOINT,E.NODE_CONNECTION_ACTION,E.NODE_CONNECTION_DROP],m=ae(()=>({actions:(l==null?void 0:l.proxy.$locale.baseText("nodeCreator.actionsCategory.actions"))??"",triggers:(l==null?void 0:l.proxy.$locale.baseText("nodeCreator.actionsCategory.triggers"))??""}));function _(o){const e=[W,K];return A.mergedNodes.filter(n=>e.some(s=>s===n.name)).map(n=>{const s=se(n,o,"action");if(s.type==="action"){const c=`nodeCreator.actionsPlaceholderNode.${n.name.replace("n8n-nodes-base.","")}`,d=l==null?void 0:l.proxy.$locale.baseText(c);d!==c&&(s.properties.displayName=d)}return s})}function b(o,e){return o.filter(t=>t.type==="action"&&t.properties.codex.categories.includes(e))}function y(o){var r,c,d,p;const e=re([...o]),t=new Set;for(const i of e){if(i.type!=="action")continue;const f=(c=(r=i.properties)==null?void 0:r.codex)==null?void 0:c.label;t.add(f)}if(t.size<=1)return e;const n=new Map;for(let i=0;i<e.length;i++){const f=e[i];if(f.type!=="action")continue;const T=(p=(d=f.properties)==null?void 0:d.codex)==null?void 0:p.label;n.has(T)||n.set(T,i)}let s=0;for(const i of t){const f={uuid:i,type:"label",key:i,subcategory:e[0].key,properties:{key:i}},T=n.get(i)+s;e.splice(T,0,f),s++}return e}function h(o,e,t=!0){const n=b(o,e);return t?y(n):n}function O(o){const e=o.displayOptions,t=Object.keys((e==null?void 0:e.show)||{}).reduce((n,s)=>{var r,c;return n[s]=(c=(r=e==null?void 0:e.show)==null?void 0:r[s])==null?void 0:c[0],n},{});return{name:o.displayName,key:o.name,value:{...o.values,...t}}}function I(o){const{selectedView:e,openSource:t}=L(),{workflowTriggerNodes:n}=P(),s=o.some(i=>U().isTriggerNode(i.type)),r=n.length>0,c=e===j,d=o.every(i=>i.type===H);return!S.includes(t)&&!s&&!r&&c&&!d}function C(o){const{allNodes:e}=P(),t=[F,Q,X,Z],n=e.find(r=>[z,D].includes(r.type))===void 0;return o.some(r=>t.includes(r.type))&&n}function k(o){if(o.length===0)return{nodes:[],connections:[]};const e=[],t=[],n=o.find(s=>s.type!==w);return n&&(n.openDetail=!0),C(o)?(o.unshift({type:D,isAutoAdd:!0}),t.push({from:{nodeIndex:0},to:{nodeIndex:1}})):I(o)&&(o.unshift({type:w,isAutoAdd:!0}),t.push({from:{nodeIndex:0},to:{nodeIndex:1}})),o.forEach((s,r)=>{switch(e.push(s),s.type){case $:{const c=r,d=c+1;e.push({type:M,isAutoAdd:!0,name:G.baseText("nodeView.replaceMe")}),t.push({from:{nodeIndex:c,outputIndex:1},to:{nodeIndex:d}},{from:{nodeIndex:d},to:{nodeIndex:c}});break}}}),{nodes:e,connections:t}}function a(o,e,t=""){const{$onAction:n}=P(),s=n(({name:r,after:c,store:{setLastNodeParameters:d},args:p})=>{r!=="addNode"||p[0].type!==o.key||c(()=>{d(o),e&&u(o,e,t),s()})});return s}function u(o,e,t){const n={node_type:o.key,action:o.name,source_mode:t.toLowerCase(),resource:o.value.resource||""};V().run("nodeCreateList.addAction",n),e==null||e.trackNodesPanel("nodeCreateList.addAction",n)}return{actionsCategoryLocales:m,getPlaceholderTriggerActions:_,parseCategoryActions:h,getAddedNodesAndConnections:k,getActionData:O,setAddedNodeActionParameters:a}},Ce=ie({__name:"NodeCreation",props:{nodeViewScale:{},createNodeActive:{type:Boolean,default:!1}},emits:["addNodes","toggleNodeCreator"],setup(A,{emit:l}){const S=A,m=de(async()=>await q(()=>import("./NodeCreator--09Cr4GM.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41]))),_=le({showStickyButton:!1}),b=J(),{getAddedNodesAndConnections:y}=ye();function h(a){const u=a.target;_.showStickyButton=!0;const o=e=>{if(u){const t=u.getBoundingClientRect(),n=t.height,s=t.width,r=t.left,c=r+s,d=t.top,p=d+n;e.pageX>r&&e.pageX<c&&e.pageY>d&&e.pageY<p||(_.showStickyButton=!1,document.removeEventListener("mousemove",o,!1))}};document.addEventListener("mousemove",o,!1)}function O(){l("toggleNodeCreator",{source:E.ADD_NODE_BUTTON,createNodeActive:!0})}function I(){document.activeElement&&document.activeElement.blur();const a=[...b.nodeViewOffsetPosition],u=ne(S.nodeViewScale,a);u[0]-=ee/2,u[1]-=oe/2,l("addNodes",y([{type:H,position:u}]))}function C(){l("toggleNodeCreator",{createNodeActive:!1})}function k(a){l("addNodes",y(a.map(u=>({type:u})))),C()}return(a,u)=>{const o=ue("n8n-icon-button");return v(),R("div",null,[a.createNodeActive?pe("",!0):(v(),R("div",{key:0,class:g([a.$style.nodeButtonsWrapper,_.showStickyButton?a.$style.noEvents:""]),onMouseenter:h},[Y("div",{class:g(a.$style.nodeCreatorButton),"data-test-id":"node-creator-plus-button"},[N(x,{label:a.$locale.baseText("nodeView.openNodesPanel"),shortcut:{keys:["Tab"]},placement:"left"},{default:B(()=>[N(o,{size:"xlarge",icon:"plus",type:"tertiary",class:g(a.$style.nodeCreatorPlus),onClick:O},null,8,["class"])]),_:1},8,["label"]),Y("div",{class:g([a.$style.addStickyButton,_.showStickyButton?a.$style.visibleButton:""]),"data-test-id":"add-sticky-button",onClick:I},[N(x,{label:a.$locale.baseText("nodeView.addStickyHint"),shortcut:{keys:["s"],shiftKey:!0},placement:"left"},{default:B(()=>[N(o,{type:"tertiary",icon:["far","note-sticky"]})]),_:1},8,["label"])],2)],2)],34)),(v(),_e(Ne,null,{default:B(()=>[N(fe(m),{active:a.createNodeActive,onNodeTypeSelected:k,onCloseNodeCreator:C},null,8,["active"])]),_:1}))])}}}),Te="_nodeButtonsWrapper_hceo4_5",ge="_addStickyButton_hceo4_14",Ee="_visibleButton_hceo4_21",Ae="_noEvents_hceo4_26",Se="_nodeCreatorButton_hceo4_30",me="_nodeCreatorPlus_hceo4_47",be={nodeButtonsWrapper:Te,addStickyButton:ge,visibleButton:Ee,noEvents:Ae,nodeCreatorButton:Se,nodeCreatorPlus:me},he={$style:be},Oe=te(Ce,[["__cssModules",he]]),Be=Object.freeze(Object.defineProperty({__proto__:null,default:Oe},Symbol.toStringTag,{value:"Module"}));export{Be as N,ye as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/NodeCreator--09Cr4GM.js","assets/n8n-_nNvRoCf.js","assets/vendor-NNwioulI.js","assets/lodash-es-5z_C16pm.js","assets/axios-s2RMMPhA.js","assets/flatted-jPn12Tq4.js","assets/esprima-next-ulPLCZ1Z.js","assets/luxon-ZRIU05qF.js","assets/pinia-aUqqC48i.js","assets/@vueuse/core-8g26_cc0.js","assets/uuid-McvpxQtQ.js","assets/vue-i18n-1PEMRmUU.js","assets/@n8n/permissions-8yMqUF1Y.js","assets/n8n-y89D68g9.css","assets/NodeView-e_zfgMVH.js","assets/@jsplumb/core-MKwKlGip.js","assets/@jsplumb/util-DR0SB56A.js","assets/@jsplumb/common-Q5_tv_GT.js","assets/index-xP-VuMjv.js","assets/@n8n/codemirror-lang-sql-feLn5IS9.js","assets/@lezer/common-1hBQ1gIF.js","assets/codemirror-lang-html-n8n-wWQLhhqk.js","assets/prettier-s3fE3Qyr.js","assets/@jsplumb/connector-bezier-3dWY17R5.js","assets/@jsplumb/browser-ui-AlqFM-P6.js","assets/codemirror-lang-n8n-expression-HpIZnV_9.js","assets/fast-json-stable-stringify-eHEaCv8s.js","assets/timeago.js--Bumj2r9.js","assets/qrcode.vue-UdCmS1Sj.js","assets/vue3-touch-events-_RfbPMOD.js","assets/chart.js-JtqvIvkt.js","assets/index-OZ0UPgDI.css","assets/useExecutionDebugging-GoiwhZAw.js","assets/file-saver-GLtlGJrO.js","assets/vue-json-pretty-AIiKR_BZ.js","assets/dateFormatter-e3zTcyK4.js","assets/RunDataAi-WDp0ZlAg.js","assets/RunDataAi-lJTQYpdI.css","assets/workflowActivate-taS2Qpdq.js","assets/collaboration.store-emJMSzVB.js","assets/NodeView-KyGlaz-v.css","assets/NodeCreator-yOn8Fne3.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=NodeCreation-q-9Zw2Lt.js.map
