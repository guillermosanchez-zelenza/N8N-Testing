import{u as h}from"./useExecutionDebugging-GoiwhZAw.js";import{aw as C,a as T}from"./index-xP-VuMjv.js";import{e as B}from"./executionsHelpers-KIs5lrX4.js";import{fz as M,V as U,a6 as L,_ as z}from"./n8n-_nNvRoCf.js";import{G as W,ag as a,l as r,m as g,p as c,T as i,I as l,O as t,S as o,R as n,M as d,Q as p}from"./vendor-NNwioulI.js";import"./pinia-aUqqC48i.js";import"./@n8n/codemirror-lang-sql-feLn5IS9.js";import"./@lezer/common-1hBQ1gIF.js";import"./codemirror-lang-html-n8n-wWQLhhqk.js";import"./prettier-s3fE3Qyr.js";import"./@jsplumb/util-DR0SB56A.js";import"./@jsplumb/core-MKwKlGip.js";import"./@jsplumb/common-Q5_tv_GT.js";import"./@jsplumb/connector-bezier-3dWY17R5.js";import"./lodash-es-5z_C16pm.js";import"./@jsplumb/browser-ui-AlqFM-P6.js";import"./uuid-McvpxQtQ.js";import"./luxon-ZRIU05qF.js";import"./esprima-next-ulPLCZ1Z.js";import"./@vueuse/core-8g26_cc0.js";import"./codemirror-lang-n8n-expression-HpIZnV_9.js";import"./fast-json-stable-stringify-eHEaCv8s.js";import"./timeago.js--Bumj2r9.js";import"./qrcode.vue-UdCmS1Sj.js";import"./vue3-touch-events-_RfbPMOD.js";import"./chart.js-JtqvIvkt.js";import"./axios-s2RMMPhA.js";import"./flatted-jPn12Tq4.js";import"./vue-i18n-1PEMRmUU.js";import"./@n8n/permissions-8yMqUF1Y.js";import"./dateFormatter-e3zTcyK4.js";const R=W({name:"ExecutionPreview",components:{ElDropdown:M,WorkflowPreview:C},mixins:[B],setup(){return{...T(),...h()}},data(){return{VIEWS:U}},computed:{executionUIDetails(){return this.activeExecution?this.getExecutionUIDetails(this.activeExecution):null},executionMode(){var e;return((e=this.activeExecution)==null?void 0:e.mode)||""},debugButtonData(){var e;return((e=this.activeExecution)==null?void 0:e.status)==="success"?{text:this.$locale.baseText("executionsList.debug.button.copyToEditor"),type:"secondary"}:{text:this.$locale.baseText("executionsList.debug.button.debugInEditor"),type:"primary"}}},methods:{async onDeleteExecution(){await this.confirm(this.$locale.baseText("executionDetails.confirmMessage.message"),this.$locale.baseText("executionDetails.confirmMessage.headline"),{type:"warning",confirmButtonText:this.$locale.baseText("executionDetails.confirmMessage.confirmButtonText"),cancelButtonText:""})===L&&this.$emit("deleteCurrentExecution")},handleRetryClick(e){this.$emit("retryExecution",{execution:this.activeExecution,command:e})},handleStopClick(){this.$emit("stopExecution")},onRetryButtonBlur(e){const m=this.$refs.retryDropdown;m&&e.relatedTarget===null&&m.handleClose()}}}),V="_previewContainer_15m41_5",O="_executionDetails_15m41_11",S="_spinner_15m41_30",N="_running_15m41_36",P="_waiting_15m41_41",F="_success_15m41_45",G="_error_15m41_49",X="_runningInfo_15m41_53",A="_runningMessage_15m41_60",H="_debugLink_15m41_66",Q={previewContainer:V,executionDetails:O,spinner:S,running:N,waiting:P,success:F,error:G,runningInfo:X,runningMessage:A,debugLink:H},j=["data-test-id"],q=c("br",null,null,-1),J=c("br",null,null,-1),K={class:"retry-button"};function Y(e,m,ee,te,ne,ie){var D,k,E,_;const y=a("n8n-spinner"),u=a("n8n-text"),x=a("n8n-button"),f=a("router-link"),w=a("n8n-icon-button"),b=a("el-dropdown-item"),v=a("el-dropdown-menu"),I=a("ElDropdown"),$=a("WorkflowPreview");return((D=e.executionUIDetails)==null?void 0:D.name)==="running"?(r(),g("div",{key:0,class:l(e.$style.runningInfo)},[c("div",{class:l(e.$style.spinner)},[i(y,{type:"ring"})],2),i(u,{class:l(e.$style.runningMessage),color:"text-light"},{default:t(()=>[o(n(e.$locale.baseText("executionDetails.runningMessage")),1)]),_:1},8,["class"]),i(x,{class:"mt-l",type:"tertiary",onClick:e.handleStopClick},{default:t(()=>[o(n(e.$locale.baseText("executionsList.stopExecution")),1)]),_:1},8,["onClick"])],2)):(r(),g("div",{key:1,class:l(e.$style.previewContainer)},[e.activeExecution?(r(),g("div",{key:0,class:l(e.$style.executionDetails),"data-test-id":`execution-preview-details-${e.executionId}`},[c("div",null,[i(u,{size:"large",color:"text-base",bold:!0,"data-test-id":"execution-time"},{default:t(()=>{var s;return[o(n((s=e.executionUIDetails)==null?void 0:s.startTime),1)]}),_:1}),q,((k=e.executionUIDetails)==null?void 0:k.name)==="running"?(r(),d(y,{key:0,size:"small",class:l([e.$style.spinner,"mr-4xs"])},null,8,["class"])):p("",!0),i(u,{size:"medium",class:l([e.$style.status,e.$style[e.executionUIDetails.name]]),"data-test-id":"execution-preview-label"},{default:t(()=>[o(n(e.executionUIDetails.label),1)]),_:1},8,["class"]),o(" "+n(" ")+" "),e.executionUIDetails.name==="running"?(r(),d(u,{key:1,color:"text-base",size:"medium"},{default:t(()=>{var s;return[o(n(e.$locale.baseText("executionDetails.runningTimeRunning",{interpolate:{time:(s=e.executionUIDetails)==null?void 0:s.runningTime}}))+" | ID#"+n(e.activeExecution.id),1)]}),_:1})):e.executionUIDetails.name!=="waiting"?(r(),d(u,{key:2,color:"text-base",size:"medium","data-test-id":"execution-preview-id"},{default:t(()=>{var s;return[o(n(e.$locale.baseText("executionDetails.runningTimeFinished",{interpolate:{time:((s=e.executionUIDetails)==null?void 0:s.runningTime)??"unknown"}}))+" | ID#"+n(e.activeExecution.id),1)]}),_:1})):((E=e.executionUIDetails)==null?void 0:E.name)==="waiting"?(r(),d(u,{key:3,color:"text-base",size:"medium"},{default:t(()=>[o(" | ID#"+n(e.activeExecution.id),1)]),_:1})):p("",!0),J,e.activeExecution.mode==="retry"?(r(),d(u,{key:4,color:"text-base",size:"medium"},{default:t(()=>[o(n(e.$locale.baseText("executionDetails.retry"))+" ",1),i(f,{class:l(e.$style.executionLink),to:{name:e.VIEWS.EXECUTION_PREVIEW,params:{workflowId:e.activeExecution.workflowId,executionId:e.activeExecution.retryOf}}},{default:t(()=>[o(" #"+n(e.activeExecution.retryOf),1)]),_:1},8,["class","to"])]),_:1})):p("",!0)]),c("div",null,[i(x,{size:"medium",type:e.debugButtonData.type,class:l({[e.$style.debugLink]:!0,[e.$style.secondary]:e.debugButtonData.type==="secondary"})},{default:t(()=>[i(f,{to:{name:e.VIEWS.EXECUTION_DEBUG,params:{name:e.activeExecution.workflowId,executionId:e.activeExecution.id}}},{default:t(()=>[c("span",{"data-test-id":"execution-debug-button",onClick:m[0]||(m[0]=(...s)=>e.handleDebugLinkClick&&e.handleDebugLinkClick(...s))},n(e.debugButtonData.text),1)]),_:1},8,["to"])]),_:1},8,["type","class"]),((_=e.executionUIDetails)==null?void 0:_.name)==="error"?(r(),d(I,{key:0,ref:"retryDropdown",trigger:"click",class:"mr-xs",onCommand:e.handleRetryClick},{dropdown:t(()=>[i(v,null,{default:t(()=>[i(b,{command:"current-workflow"},{default:t(()=>[o(n(e.$locale.baseText("executionsList.retryWithCurrentlySavedWorkflow")),1)]),_:1}),i(b,{command:"original-workflow"},{default:t(()=>[o(n(e.$locale.baseText("executionsList.retryWithOriginalWorkflow")),1)]),_:1})]),_:1})]),default:t(()=>[c("span",K,[i(w,{size:"medium",type:"tertiary",title:e.$locale.baseText("executionsList.retryExecution"),icon:"redo","data-test-id":"execution-preview-retry-button",onBlur:e.onRetryButtonBlur},null,8,["title","onBlur"])])]),_:1},8,["onCommand"])):p("",!0),i(w,{title:e.$locale.baseText("executionDetails.deleteExecution"),icon:"trash",size:"medium",type:"tertiary","data-test-id":"execution-preview-delete-button",onClick:e.onDeleteExecution},null,8,["title","onClick"])])],10,j)):p("",!0),i($,{mode:"execution","loader-type":"spinner","execution-id":e.executionId,"execution-mode":e.executionMode},null,8,["execution-id","execution-mode"])],2))}const Z={$style:Q},We=z(R,[["render",Y],["__cssModules",Z]]);export{We as default};
//# sourceMappingURL=ExecutionPreview-s2NM_uv5.js.map
