import{m as u}from"./pinia-aUqqC48i.js";import{e as d,v as k,u as h,l as v,$ as p,a5 as l,d4 as W,d3 as m,d7 as g}from"./n8n-_nNvRoCf.js";import{w as A}from"./index-xP-VuMjv.js";import{G as I}from"./vendor-NNwioulI.js";const y=I({mixins:[A],setup(){return{...d()}},data(){return{updatingWorkflowActivation:!1}},computed:{...u(v,h,k)},methods:{async activateCurrentWorkflow(s){const t=this.workflowsStore.workflowId;return await this.updateWorkflowActivation(t,!0,s)},async updateWorkflowActivation(s,t,w){this.updatingWorkflowActivation=!0;const f=this.workflowsStore.nodesIssuesExist;let o=s;if(!o||o===p){if(!await this.saveCurrentWorkflow()){this.updatingWorkflowActivation=!1;return}o=this.workflowsStore.workflowId}const e=o===this.workflowsStore.workflowId,r=this.workflowsStore.activeWorkflows.includes(o),i={workflow_id:o,is_active:t,previous_status:r,ndv_input:w==="ndv"};this.$telemetry.track("User set workflow active status",i),l().run("workflowActivate.updateWorkflowActivation",i);try{if(r&&t){this.showMessage({title:this.$locale.baseText("workflowActivator.workflowIsActive"),type:"success"}),this.updatingWorkflowActivation=!1;return}if(e&&f&&t){this.showMessage({title:this.$locale.baseText("workflowActivator.showMessage.activeChangedNodesIssuesExistTrue.title"),message:this.$locale.baseText("workflowActivator.showMessage.activeChangedNodesIssuesExistTrue.message"),type:"error"}),this.updatingWorkflowActivation=!1;return}await this.updateWorkflow({workflowId:o,active:t},!this.uiStore.stateIsDirty)}catch(a){const c=t?"activated":"deactivated";this.showError(a,this.$locale.baseText("workflowActivator.showError.title",{interpolate:{newStateName:c}})+":"),this.updatingWorkflowActivation=!1;return}const n=e?"workflow.activeChangeCurrent":"workflow.activeChange";l().run(n,{workflowId:o,active:t}),this.$emit("workflowActiveChanged",{id:o,active:t}),this.updatingWorkflowActivation=!1,e&&(t&&W(g).value!=="true"?this.uiStore.openModal(m):await this.settingsStore.fetchPromptsData())}}});export{y as w};
//# sourceMappingURL=workflowActivate-taS2Qpdq.js.map
