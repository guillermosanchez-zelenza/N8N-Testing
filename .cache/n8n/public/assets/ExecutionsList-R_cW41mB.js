import{m as b}from"./pinia-aUqqC48i.js";import{e as W}from"./executionsHelpers-KIs5lrX4.js";import{V as m,_ as I,v as A,u as M,aM as D,e as N,l as O,y as F,$ as R,M as U,a6 as V,ft as P,fy as B,a3 as z,Z as H,a5 as X}from"./n8n-_nNvRoCf.js";import{E as G,a as q}from"./ExecutionFilter-_0GCyo-5.js";import{G as T,ag as h,l as u,m as v,T as d,O as E,p as S,S as g,R as y,I as c,M as $,Q as k,F as j,a7 as K}from"./vendor-NNwioulI.js";import{E as Q}from"./ExecutionsInfoAccordion-4SFzaB2J.js";import{w as Y,a as Z,u as J,av as ee,D as te}from"./index-xP-VuMjv.js";import{v as oe}from"./uuid-McvpxQtQ.js";import{_ as ie}from"./lodash-es-5z_C16pm.js";import"./dateFormatter-e3zTcyK4.js";import"./axios-s2RMMPhA.js";import"./flatted-jPn12Tq4.js";import"./esprima-next-ulPLCZ1Z.js";import"./luxon-ZRIU05qF.js";import"./@vueuse/core-8g26_cc0.js";import"./vue-i18n-1PEMRmUU.js";import"./@n8n/permissions-8yMqUF1Y.js";import"./@n8n/codemirror-lang-sql-feLn5IS9.js";import"./@lezer/common-1hBQ1gIF.js";import"./codemirror-lang-html-n8n-wWQLhhqk.js";import"./prettier-s3fE3Qyr.js";import"./@jsplumb/util-DR0SB56A.js";import"./@jsplumb/core-MKwKlGip.js";import"./@jsplumb/common-Q5_tv_GT.js";import"./@jsplumb/connector-bezier-3dWY17R5.js";import"./@jsplumb/browser-ui-AlqFM-P6.js";import"./codemirror-lang-n8n-expression-HpIZnV_9.js";import"./fast-json-stable-stringify-eHEaCv8s.js";import"./timeago.js--Bumj2r9.js";import"./qrcode.vue-UdCmS1Sj.js";import"./vue3-touch-events-_RfbPMOD.js";import"./chart.js-JtqvIvkt.js";const se=T({name:"ExecutionCard",components:{ExecutionTime:G},mixins:[W],props:{execution:{type:Object,required:!0},highlight:{type:Boolean,default:!1},showGap:{type:Boolean,default:!1}},data(){return{VIEWS:m}},computed:{retryExecutionActions(){return[{id:"current-workflow",label:this.$locale.baseText("executionsList.retryWithCurrentlySavedWorkflow")},{id:"original-workflow",label:this.$locale.baseText("executionsList.retryWithOriginalWorkflow")}]},executionUIDetails(){return this.getExecutionUIDetails(this.execution)},isActive(){return this.execution.id===this.$route.params.executionId}},methods:{onRetryMenuItemSelect(e){this.$emit("retryExecution",{execution:this.execution,command:e})}}}),ne="_executionCard_12y8i_5",re="_active_12y8i_10",ae="_executionStatus_12y8i_13",le="_executionLink_12y8i_16",ce="_running_12y8i_19",ue="_spinner_12y8i_19",he="_statusLabel_12y8i_26",de="_success_12y8i_30",fe="_waiting_12y8i_33",we="_error_12y8i_39",me="_unknown_12y8i_45",pe="_icon_12y8i_61",xe="_icons_12y8i_66",Ee="_retry_12y8i_74",ye="_manual_12y8i_77",ke="_showGap_12y8i_85",ge={executionCard:ne,active:re,executionStatus:ae,executionLink:le,running:ce,spinner:ue,statusLabel:he,success:de,waiting:fe,error:we,unknown:me,icon:pe,icons:xe,retry:Ee,manual:ye,showGap:ke},ve={key:0};function $e(e,t,i,o,s,n){const a=h("n8n-text"),l=h("n8n-spinner"),r=h("ExecutionTime"),f=h("n8n-action-dropdown"),_=h("font-awesome-icon"),p=h("n8n-tooltip"),x=h("router-link");return u(),v("div",{class:c({"execution-card":!0,[e.$style.executionCard]:!0,[e.$style.active]:e.isActive,[e.$style[e.executionUIDetails.name]]:!0,[e.$style.highlight]:e.highlight,[e.$style.showGap]:e.showGap})},[d(x,{class:c(e.$style.executionLink),to:{name:e.VIEWS.EXECUTION_PREVIEW,params:{name:e.currentWorkflow,executionId:e.execution.id}},"data-test-execution-status":e.executionUIDetails.name},{default:E(()=>[S("div",{class:c(e.$style.description)},[d(a,{color:"text-dark",bold:!0,size:"medium","data-test-id":"execution-time"},{default:E(()=>[g(y(e.executionUIDetails.startTime),1)]),_:1}),S("div",{class:c(e.$style.executionStatus)},[e.executionUIDetails.name==="running"?(u(),$(l,{key:0,size:"small",class:c([e.$style.spinner,"mr-4xs"])},null,8,["class"])):k("",!0),d(a,{class:c(e.$style.statusLabel),size:"small"},{default:E(()=>[g(y(e.executionUIDetails.label),1)]),_:1},8,["class"]),g(" "+y(" ")+" "),e.executionUIDetails.name==="running"?(u(),$(a,{key:1,color:e.isActive?"text-dark":"text-base",size:"small"},{default:E(()=>[g(y(e.$locale.baseText("executionDetails.runningTimeRunning"))+" ",1),d(r,{"start-time":e.execution.startedAt},null,8,["start-time"])]),_:1},8,["color"])):e.executionUIDetails.runningTime!==""?(u(),$(a,{key:2,color:e.isActive?"text-dark":"text-base",size:"small"},{default:E(()=>{var w;return[g(y(e.$locale.baseText("executionDetails.runningTimeFinished",{interpolate:{time:(w=e.executionUIDetails)==null?void 0:w.runningTime}})),1)]}),_:1},8,["color"])):k("",!0)],2),e.execution.mode==="retry"?(u(),v("div",ve,[d(a,{color:e.isActive?"text-dark":"text-base",size:"small"},{default:E(()=>[g(y(e.$locale.baseText("executionDetails.retry"))+" #"+y(e.execution.retryOf),1)]),_:1},8,["color"])])):k("",!0)],2),S("div",{class:c(e.$style.icons)},[e.executionUIDetails.name==="error"?(u(),$(f,{key:0,class:c([e.$style.icon,e.$style.retry]),items:e.retryExecutionActions,"activator-icon":"redo","data-test-id":"retry-execution-button",onSelect:e.onRetryMenuItemSelect},null,8,["class","items","onSelect"])):k("",!0),e.execution.mode==="manual"?(u(),$(p,{key:1,placement:"top"},{content:E(()=>[S("span",null,y(e.$locale.baseText("executionsList.test")),1)]),default:E(()=>[e.execution.mode==="manual"?(u(),$(_,{key:0,class:c([e.$style.icon,e.$style.manual]),icon:"flask"},null,8,["class"])):k("",!0)]),_:1})):k("",!0)],2)]),_:1},8,["class","to","data-test-execution-status"])],2)}const Se={$style:ge},_e=I(se,[["render",$e],["__cssModules",Se]]),Ie=T({name:"ExecutionsSidebar",components:{ExecutionCard:_e,ExecutionsInfoAccordion:Q,ExecutionFilter:q},props:{autoRefresh:{type:Boolean,default:!1},executions:{type:Array,required:!0},loading:{type:Boolean,default:!0},loadingMore:{type:Boolean,default:!1},temporaryExecution:{type:Object,default:null}},data(){return{VIEWS:m,filter:{}}},computed:{...b(M,A)},watch:{$route(e,t){t.name===m.EXECUTION_PREVIEW&&e.name===m.EXECUTION_HOME&&this.$router.go(-1)}},mounted(){this.checkListSize(),this.scrollToActiveCard()},methods:{loadMore(e=20){if(!this.loading){const t=this.$refs.executionList;if(t){const i=t.offsetHeight-(t.scrollHeight-t.scrollTop);i>-10&&i<10&&this.$emit("loadMore",e)}}},onRetryExecution(e){this.$emit("retryExecution",e)},onRefresh(){this.$emit("refresh")},onFilterChanged(e){this.$emit("filterUpdated",e)},reloadExecutions(){this.$emit("reloadExecutions")},checkListSize(){var i;const e=this.$refs.container,t=this.$refs[`execution-${(i=this.workflowsStore.activeWorkflowExecution)==null?void 0:i.id}`];if(e&&(t!=null&&t.length)){const o=t[0].$el,s=Math.ceil(e.clientHeight/o.clientHeight);s>this.executions.length&&this.$emit("loadMore",s-this.executions.length)}},scrollToActiveCard(){var i;const e=this.$refs.executionList,t=this.$refs[`execution-${(i=this.workflowsStore.activeWorkflowExecution)==null?void 0:i.id}`];if(e&&(t!=null&&t.length)&&this.workflowsStore.activeWorkflowExecution){const s=t[0].$el.getBoundingClientRect(),n=200;s.top>e.offsetHeight&&e.scrollTo({top:s.top-n})}}}}),Te="_container_iuzt7_5",Re="_heading_iuzt7_16",be="_controls_iuzt7_23",We="_executionList_iuzt7_35",Ae="_infoAccordion_iuzt7_53",Me="_noResultsContainer_iuzt7_65",Ce={container:Te,heading:Re,controls:be,executionList:We,infoAccordion:Ae,noResultsContainer:Me},Le={key:0,class:"mr-l"},De={key:3,class:"mr-m"};function Ne(e,t,i,o,s,n){const a=h("n8n-heading"),l=h("el-checkbox"),r=h("ExecutionFilter"),f=h("n8n-loading"),_=h("n8n-text"),p=h("ExecutionCard"),x=h("ExecutionsInfoAccordion");return u(),v("div",{ref:"container",class:c(["executions-sidebar",e.$style.container]),"data-test-id":"executions-sidebar"},[S("div",{class:c(e.$style.heading)},[d(a,{tag:"h2",size:"medium",color:"text-dark"},{default:E(()=>[g(y(e.$locale.baseText("generic.executions")),1)]),_:1})],2),S("div",{class:c(e.$style.controls)},[d(l,{"model-value":e.autoRefresh,"data-test-id":"auto-refresh-checkbox","onUpdate:modelValue":t[0]||(t[0]=w=>e.$emit("update:autoRefresh",w))},{default:E(()=>[g(y(e.$locale.baseText("executionsList.autoRefresh")),1)]),_:1},8,["model-value"]),d(r,{"popover-placement":"left-start",onFilterChanged:e.onFilterChanged},null,8,["onFilterChanged"])],2),S("div",{ref:"executionList",class:c(e.$style.executionList),"data-test-id":"current-executions-list",onScroll:t[1]||(t[1]=w=>e.loadMore(20))},[e.loading?(u(),v("div",Le,[d(f,{variant:"rect"})])):k("",!0),!e.loading&&e.executions.length===0?(u(),v("div",{key:1,class:c(e.$style.noResultsContainer)},[d(_,{color:"text-base",size:"medium",align:"center"},{default:E(()=>[g(y(e.$locale.baseText("executionsLandingPage.noResults")),1)]),_:1})],2)):e.temporaryExecution?(u(),$(p,{key:2,ref:`execution-${e.temporaryExecution.id}`,execution:e.temporaryExecution,"data-test-id":`execution-details-${e.temporaryExecution.id}`,"show-gap":!0,onRetryExecution:e.onRetryExecution},null,8,["execution","data-test-id","onRetryExecution"])):k("",!0),(u(!0),v(j,null,K(e.executions,w=>(u(),$(p,{key:w.id,ref_for:!0,ref:`execution-${w.id}`,execution:w,"data-test-id":`execution-details-${w.id}`,onRetryExecution:e.onRetryExecution},null,8,["execution","data-test-id","onRetryExecution"]))),128)),e.loadingMore?(u(),v("div",De,[d(f,{variant:"p",rows:1})])):k("",!0)],34),S("div",{class:c(e.$style.infoAccordion)},[d(x,{"initially-expanded":!1})],2)],2)}const Oe={$style:Ce},Fe=I(Ie,[["render",Ne],["__cssModules",Oe],["__scopeId","data-v-33be88a1"]]),Ue=5,Ve=100,Pe=T({name:"ExecutionsList",components:{ExecutionsSidebar:Fe},mixins:[W,Y],setup(){const e=X(),{callDebounced:t}=D();return{externalHooks:e,callDebounced:t,...N(),...Z()}},data(){return{loading:!1,loadingMore:!1,filter:{},temporaryExecution:null,autoRefresh:!1,autoRefreshTimeout:void 0}},computed:{...b(J,F,O,M,A),hidePreview(){const e=this.filterApplied&&!this.executions.find(t=>{var i;return t.id===((i=this.activeExecution)==null?void 0:i.id)});return this.loading||!this.executions.length||e},filterApplied(){return this.filter.status!=="all"},workflowDataNotLoaded(){return this.workflowsStore.workflowId===R&&this.workflowsStore.workflowName===""},loadedFinishedExecutionsCount(){return this.workflowsStore.getAllLoadedFinishedExecutions.length},totalFinishedExecutionsCount(){return this.workflowsStore.getTotalFinishedExecutionsCount},requestFilter(){return ee({...this.filter,workflowId:this.currentWorkflow})}},watch:{$route(e,t){if(e.params.name){const i=t.params.name!==e.params.name;this.initView(i)}if(e.params.executionId){const i=this.workflowsStore.getExecutionDataById(e.params.executionId);i&&(this.workflowsStore.activeWorkflowExecution=i)}}},async beforeRouteLeave(e,t,i){if(te(e)===U.WORKFLOW){i();return}if(this.uiStore.stateIsDirty){const o=await this.confirm(this.$locale.baseText("generic.unsavedWork.confirmMessage.message"),{title:this.$locale.baseText("generic.unsavedWork.confirmMessage.headline"),type:"warning",confirmButtonText:this.$locale.baseText("generic.unsavedWork.confirmMessage.confirmButtonText"),cancelButtonText:this.$locale.baseText("generic.unsavedWork.confirmMessage.cancelButtonText"),showClose:!0});o===V?(await this.saveCurrentWorkflow({},!1)&&await this.settingsStore.fetchPromptsData(),this.uiStore.stateIsDirty=!1,i()):o===P&&(this.uiStore.stateIsDirty=!1,i())}else i()},created(){this.autoRefresh=this.uiStore.executionSidebarAutoRefresh},async mounted(){this.loading=!0;const e=this.$route.params.name!==this.workflowsStore.workflowId,t=this.$route.params.name==="new"&&this.workflowsStore.workflowId===R,i=e&&!t;if(await this.initView(i),!i)if(this.workflowsStore.currentWorkflowExecutions.length>0){const o=await this.loadExecutions();this.workflowsStore.addToCurrentExecutions(o),await this.setActiveExecution()}else await this.setExecutions();this.startAutoRefreshInterval(),document.addEventListener("visibilitychange",this.onDocumentVisibilityChange),this.loading=!1},beforeUnmount(){document.removeEventListener("visibilitychange",this.onDocumentVisibilityChange),this.autoRefresh=!1,this.stopAutoRefreshInterval()},methods:{async initView(e){e&&(await this.nodeTypesStore.loadNodeTypesIfNotLoaded(),await this.openWorkflow(this.$route.params.name),this.uiStore.nodeViewInitialized=!1,this.workflowsStore.currentWorkflowExecutions.length===0&&await this.setExecutions(),this.activeExecution&&this.$router.push({name:m.EXECUTION_PREVIEW,params:{name:this.currentWorkflow,executionId:this.activeExecution.id}}).catch(()=>{}))},async onLoadMore(){this.loadingMore||await this.callDebounced(this.loadMore,{debounceTime:1e3})},async loadMore(e=20){var s;if(this.filter.status==="running"||this.loadedFinishedExecutionsCount>=this.totalFinishedExecutionsCount)return;this.loadingMore=!0;let t;this.executions.length!==0&&(t=this.executions.slice(-1)[0].id);let i;try{i=await this.workflowsStore.getPastExecutions(this.requestFilter,e,t)}catch(n){this.loadingMore=!1,this.showError(n,this.$locale.baseText("executionsList.showError.loadMore.title"));return}i.results=i.results.map(n=>({...n,mode:n.mode}));const o=[...this.executions];for(const n of i.results)o.find(a=>a.id===n.id)===void 0&&o.push(n),n.id===((s=this.temporaryExecution)==null?void 0:s.id)&&(this.temporaryExecution=null);this.workflowsStore.currentWorkflowExecutions=o,this.loadingMore=!1},async onDeleteCurrentExecution(){var e;this.loading=!0;try{const t=this.executions.findIndex(o=>o.id===this.$route.params.executionId),i=this.executions[t+1]||this.executions[t-1]||this.executions[0];await this.workflowsStore.deleteExecutions({ids:[this.$route.params.executionId]}),this.workflowsStore.deleteExecution(this.executions[t]),((e=this.temporaryExecution)==null?void 0:e.id)===this.$route.params.executionId&&(this.temporaryExecution=null),this.executions.length>0?(await this.$router.replace({name:m.EXECUTION_PREVIEW,params:{name:this.currentWorkflow,executionId:i.id}}).catch(()=>{}),this.workflowsStore.activeWorkflowExecution=i,await this.setExecutions()):(this.workflowsStore.activeWorkflowExecution=null,await this.$router.replace({name:m.EXECUTION_HOME,params:{name:this.currentWorkflow}}))}catch(t){this.loading=!1,this.showError(t,this.$locale.baseText("executionsList.showError.handleDeleteSelected.title"));return}this.loading=!1,this.showMessage({title:this.$locale.baseText("executionsList.showMessage.handleDeleteSelected.title"),type:"success"})},async onStopExecution(){const e=this.$route.params.executionId;try{await this.workflowsStore.stopCurrentExecution(e),this.showMessage({title:this.$locale.baseText("executionsList.showMessage.stopExecution.title"),message:this.$locale.baseText("executionsList.showMessage.stopExecution.message",{interpolate:{activeExecutionId:e}}),type:"success"}),await this.loadAutoRefresh()}catch(t){this.showError(t,this.$locale.baseText("executionsList.showError.stopExecution.title"))}},async onFilterUpdated(e){this.filter=e,await this.setExecutions()},async setExecutions(){this.workflowsStore.currentWorkflowExecutions=await this.loadExecutions(),await this.setActiveExecution()},async startAutoRefreshInterval(){this.autoRefresh&&(await this.loadAutoRefresh(),this.stopAutoRefreshInterval(),this.autoRefreshTimeout=setTimeout(()=>{this.startAutoRefreshInterval()},4e3))},stopAutoRefreshInterval(){clearTimeout(this.autoRefreshTimeout),this.autoRefreshTimeout=void 0},onAutoRefreshToggle(e){this.autoRefresh=e,this.uiStore.executionSidebarAutoRefresh=this.autoRefresh,this.stopAutoRefreshInterval(),this.startAutoRefreshInterval()},onDocumentVisibilityChange(){document.visibilityState==="hidden"?this.stopAutoRefreshInterval():this.startAutoRefreshInterval()},async loadAutoRefresh(){var a;const e=await this.loadExecutions();let t=[...this.executions];const i=t.map(l=>parseInt(l.id,10));let o=0;const s=[];let n=null;for(let l=e.length-1;l>=0;l--){const r=e[l],f=parseInt(r.id,10);if(o!==0&&!isNaN(f)&&f-o>1){const x=ie(o+1,f);s.push(...x)}o=parseInt(r.id,10)||0;const _=i.indexOf(f);if(_!==-1){const x=t.find(L=>L.id===r.id),w=x&&x.finished===!1||(x==null?void 0:x.stoppedAt)===void 0,C=r.finished===!0||r.stoppedAt!==void 0;w&&C&&(t[_]=r,r.id===((a=this.activeExecution)==null?void 0:a.id)&&(n=r));continue}let p;for(p=t.length-1;p>=0;p--)if(f<parseInt(t[p].id,10)){t.splice(p+1,0,r);break}p===-1&&t.unshift(r)}t=t.filter(l=>!s.includes(parseInt(l.id,10))&&o>=parseInt(l.id,10)),this.workflowsStore.currentWorkflowExecutions=t,n!==null?this.workflowsStore.activeWorkflowExecution=n:!t.some(r=>{var f;return r.id===((f=this.activeExecution)==null?void 0:f.id)})&&this.executions.length>0&&!this.temporaryExecution?this.$router.push({name:m.EXECUTION_PREVIEW,params:{name:this.currentWorkflow,executionId:this.executions[0].id}}).catch(()=>{}):this.executions.length===0&&this.$route.name===m.EXECUTION_PREVIEW&&(this.$router.push({name:m.EXECUTION_HOME,params:{name:this.currentWorkflow}}).catch(()=>{}),this.workflowsStore.activeWorkflowExecution=null)},async loadExecutions(){if(!this.currentWorkflow)return[];try{return await this.workflowsStore.loadCurrentWorkflowExecutions(this.requestFilter)}catch(e){return e.errorCode===B?this.showMessage({title:this.$locale.baseText("executionsList.showError.refreshData.title"),message:e.message,type:"error",duration:3500},!1):this.showError(e,this.$locale.baseText("executionsList.showError.refreshData.title")),[]}},async setActiveExecution(){const e=this.$route.params.executionId;if(e){const t=this.workflowsStore.getExecutionDataById(e);t?this.workflowsStore.activeWorkflowExecution=t:await this.tryToFindExecution(e)}this.workflowsStore.activeWorkflowExecution===null&&this.executions.length>0&&!this.temporaryExecution&&(this.workflowsStore.activeWorkflowExecution=this.executions[0],this.$route.name===m.EXECUTION_HOME&&this.$router.push({name:m.EXECUTION_PREVIEW,params:{name:this.currentWorkflow,executionId:this.executions[0].id}}).catch(()=>{}))},async tryToFindExecution(e,t=0){if(t===0){const o=await this.workflowsStore.fetchExecutionDataById(e);if(o)this.temporaryExecution=o;else{this.workflowsStore.activeWorkflowExecution=null,this.showError(new Error(this.$locale.baseText("executionView.notFound.message",{interpolate:{executionId:e}})),this.$locale.baseText("nodeView.showError.openExecution.title"));return}}if(t>=Ue){if(this.temporaryExecution){this.workflowsStore.activeWorkflowExecution=this.temporaryExecution;return}this.workflowsStore.activeWorkflowExecution=null;return}await this.loadMore(Ve);const i=this.workflowsStore.getExecutionDataById(e);if(!i)await this.$nextTick(),await this.tryToFindExecution(e,t+1);else{this.workflowsStore.activeWorkflowExecution=i,this.temporaryExecution=null;return}},async openWorkflow(e){await this.loadActiveWorkflows();let t;try{t=await this.workflowsStore.fetchWorkflow(e)}catch(s){this.showError(s,this.$locale.baseText("nodeView.showError.openWorkflow.title"));return}if(t===void 0)throw new Error(this.$locale.baseText("nodeView.workflowWithIdCouldNotBeFound",{interpolate:{workflowId:e}}));await this.addNodes(t.nodes,t.connections),this.workflowsStore.setActive(t.active||!1),this.workflowsStore.setWorkflowId(e),this.workflowsStore.setWorkflowName({newName:t.name,setStateDirty:!1}),this.workflowsStore.setWorkflowSettings(t.settings||{}),this.workflowsStore.setWorkflowPinData(t.pinData||{});const i=t.tags||[],o=i.map(s=>s.id);this.workflowsStore.setWorkflowTagIds(o||[]),this.workflowsStore.setWorkflowVersionId(t.versionId),this.tagsStore.upsertTags(i),this.externalHooks.run("workflow.open",{workflowId:e,workflowName:t.name}),this.uiStore.stateIsDirty=!1},async addNodes(e,t){if(!(e!=null&&e.length))return;await this.loadNodesProperties(e.map(o=>({name:o.type,version:o.typeVersion})));let i;if(e.forEach(o=>{if(o.id||(o.id=oe()),i=this.nodeTypesStore.getNodeType(o.type,o.typeVersion),o.hasOwnProperty("disabled")||(o.disabled=!1),o.hasOwnProperty("parameters")||(o.parameters={}),i!==null){let s=null;try{s=z(i.properties,o.parameters,!0,!1,o)}catch(n){console.error(this.$locale.baseText("nodeView.thereWasAProblemLoadingTheNodeParametersOfNode")+`: "${o.name}"`),console.error(n)}o.parameters=s!==null?s:{},o.type===H&&o.parameters.path===""&&(o.parameters.path=o.webhookId)}this.workflowsStore.addNode(o)}),t!==void 0){let o;for(const s of Object.keys(t))for(const n of Object.keys(t[s]))for(let a=0;a<t[s][n].length;a++){const l=t[s][n][a];l&&l.forEach(r=>{o=[{node:s,type:n,index:a},{node:r.node,type:r.type,index:r.index}],this.workflowsStore.addConnection({connection:o,setStateDirty:!1})})}}},async loadNodesProperties(e){const t=this.nodeTypesStore.allNodeTypes,i=[];t.forEach(o=>{const s=Array.isArray(o.version)?o.version:[o.version];e.find(n=>n.name===o.name&&s.includes(n.version))&&!o.hasOwnProperty("properties")&&i.push({name:o.name,version:Array.isArray(o.version)?o.version.slice(-1)[0]:o.version})}),i.length>0&&await this.nodeTypesStore.getNodesInformation(i)},async loadActiveWorkflows(){await this.workflowsStore.fetchActiveWorkflows()},async onRetryExecution(e){const t=e.command==="current-workflow";this.showMessage({title:this.$locale.baseText("executionDetails.runningMessage"),type:"info",duration:2e3}),await this.retryExecution(e.execution,t),await this.loadAutoRefresh(),this.$telemetry.track("User clicked retry execution button",{workflow_id:this.workflowsStore.workflowId,execution_id:e.execution.id,retry_type:t?"current":"original"})},async retryExecution(e,t){try{await this.workflowsStore.retryExecution(e.id,t)?this.showMessage({title:this.$locale.baseText("executionsList.showMessage.retrySuccessfulTrue.title"),type:"success"}):this.showMessage({title:this.$locale.baseText("executionsList.showMessage.retrySuccessfulFalse.title"),type:"error"})}catch(i){this.showError(i,this.$locale.baseText("executionsList.showError.retryExecution.title"))}}}}),Be="_container_1e18q_5",ze="_content_1e18q_11",He={container:Be,content:ze};function Xe(e,t,i,o,s,n){const a=h("ExecutionsSidebar"),l=h("router-view");return u(),v("div",{class:c(e.$style.container)},[d(a,{executions:e.executions,loading:e.loading&&!e.executions.length,"loading-more":e.loadingMore,"temporary-execution":e.temporaryExecution,"auto-refresh":e.autoRefresh,"onUpdate:autoRefresh":e.onAutoRefreshToggle,onReloadExecutions:e.setExecutions,onFilterUpdated:e.onFilterUpdated,onLoadMore:e.onLoadMore,onRetryExecution:e.onRetryExecution},null,8,["executions","loading","loading-more","temporary-execution","auto-refresh","onUpdate:autoRefresh","onReloadExecutions","onFilterUpdated","onLoadMore","onRetryExecution"]),e.hidePreview?k("",!0):(u(),v("div",{key:0,class:c(e.$style.content)},[d(l,{name:"executionPreview",onDeleteCurrentExecution:e.onDeleteCurrentExecution,onRetryExecution:e.onRetryExecution,onStopExecution:e.onStopExecution},null,8,["onDeleteCurrentExecution","onRetryExecution","onStopExecution"])],2))],2)}const Ge={$style:He},_t=I(Pe,[["render",Xe],["__cssModules",Ge]]);export{_t as default};
//# sourceMappingURL=ExecutionsList-R_cW41mB.js.map
