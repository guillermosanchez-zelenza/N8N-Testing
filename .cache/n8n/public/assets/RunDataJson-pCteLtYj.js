import{g6 as P,v as b,a9 as v,at as _,e3 as j,D as J,cH as k,a5 as S,_ as E}from"./n8n-_nNvRoCf.js";import{V as N}from"./vue-json-pretty-AIiKR_BZ.js";import{D as M}from"./NodeView-e_zfgMVH.js";import{m as $}from"./pinia-aUqqC48i.js";import{M as T,_ as A}from"./TextWithHighlights.vue_vue_type_script_setup_true_lang-OUCPnKVA.js";import{aP as C}from"./index-xP-VuMjv.js";import{G as V,r as d,aE as w,ag as o,l as s,m as I,M as r,O as p,Q as h,aG as R,T as m,I as l}from"./vendor-NNwioulI.js";import"./lodash-es-5z_C16pm.js";import"./axios-s2RMMPhA.js";import"./flatted-jPn12Tq4.js";import"./esprima-next-ulPLCZ1Z.js";import"./luxon-ZRIU05qF.js";import"./@vueuse/core-8g26_cc0.js";import"./uuid-McvpxQtQ.js";import"./vue-i18n-1PEMRmUU.js";import"./@n8n/permissions-8yMqUF1Y.js";import"./@jsplumb/core-MKwKlGip.js";import"./@jsplumb/util-DR0SB56A.js";import"./@jsplumb/common-Q5_tv_GT.js";import"./useExecutionDebugging-GoiwhZAw.js";import"./file-saver-GLtlGJrO.js";import"./dateFormatter-e3zTcyK4.js";import"./RunDataAi-WDp0ZlAg.js";import"./@n8n/codemirror-lang-sql-feLn5IS9.js";import"./@lezer/common-1hBQ1gIF.js";import"./codemirror-lang-html-n8n-wWQLhhqk.js";import"./prettier-s3fE3Qyr.js";import"./@jsplumb/connector-bezier-3dWY17R5.js";import"./@jsplumb/browser-ui-AlqFM-P6.js";import"./codemirror-lang-n8n-expression-HpIZnV_9.js";import"./fast-json-stable-stringify-eHEaCv8s.js";import"./timeago.js--Bumj2r9.js";import"./qrcode.vue-UdCmS1Sj.js";import"./vue3-touch-events-_RfbPMOD.js";import"./chart.js-JtqvIvkt.js";import"./workflowActivate-taS2Qpdq.js";import"./collaboration.store-emJMSzVB.js";const H=w(async()=>await k(()=>import("./RunDataJsonActions-D1RkNUsx.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42]))),F=V({name:"RunDataJson",components:{VueJsonPretty:N,Draggable:M,RunDataJsonActions:H,MappingPill:T,TextWithHighlights:A},props:{editMode:{type:Object},sessionId:{type:String},paneType:{type:String},node:{type:Object},inputData:{type:Array},mappingEnabled:{type:Boolean},distanceFromActive:{type:Number},runIndex:{type:Number},totalRuns:{type:Number},search:{type:String}},setup(){const e=S(),a=d(P),n=d(null),g=d("json");return{externalHooks:e,selectedJsonPath:a,draggingPath:n,displayMode:g}},computed:{...$(v,b),jsonData(){return _(this.inputData)}},methods:{getShortKey(e){return e?j(e.dataset.name||"",16,2):""},getJsonParameterPath(e){const a=e.replace(/^(\["?\d"?])/,"");return C({nodeName:this.node.name,distanceFromActive:this.distanceFromActive,path:a})},onDragStart(e){e!=null&&e.dataset.path&&(this.draggingPath=e.dataset.path),this.ndvStore.resetMappingTelemetry()},onDragEnd(e){this.draggingPath=null;const a=this.ndvStore.mappingTelemetry,n={src_node_type:this.node.type,src_field_name:e.dataset.name||"",src_nodes_back:this.distanceFromActive,src_run_index:this.runIndex,src_runs_total:this.totalRuns,src_field_nest_level:e.dataset.depth||0,src_view:"json",src_element:e,success:!1,...a};setTimeout(()=>{this.externalHooks.run("runDataJson.onDragEnd",n),this.$telemetry.track("User dragged data for mapping",n)},1e3)},getContent(e){return J(e)?`"${e}"`:JSON.stringify(e)},getListItemName(e){return e.replace(/^(\["?\d"?]\.?)/g,"")}}}),O="_jsonDisplay_1wesj_5",B="_mappable_1wesj_24",W="_dragged_1wesj_31",K={jsonDisplay:O,mappable:B,dragged:W};function L(e,a,n,g,U,z){const u=o("RunDataJsonActions"),y=o("MappingPill"),i=o("TextWithHighlights"),D=o("VueJsonPretty"),f=o("Draggable");return s(),I("div",{class:l(e.$style.jsonDisplay)},[(s(),r(R,null,{default:p(()=>[e.editMode.enabled?h("",!0):(s(),r(u,{key:0,node:e.node,"sessio-id":e.sessionId,"display-mode":e.displayMode,"distance-from-active":e.distanceFromActive,"selected-json-path":e.selectedJsonPath,"json-data":e.jsonData,"pane-type":e.paneType},null,8,["node","sessio-id","display-mode","distance-from-active","selected-json-path","json-data","pane-type"]))]),_:1})),m(f,{type:"mapping","target-data-key":"mappable",disabled:!e.mappingEnabled,onDragstart:e.onDragStart,onDragend:e.onDragEnd},{preview:p(({canDrop:t,el:c})=>[c?(s(),r(y,{key:0,html:e.getShortKey(c),"can-drop":t},null,8,["html","can-drop"])):h("",!0)]),default:p(()=>[m(D,{data:e.jsonData,deep:10,"show-length":!0,"selected-value":e.selectedJsonPath,"root-path":"","selectable-type":"single",class:"json-data","onUpdate:selectedValue":a[0]||(a[0]=t=>e.selectedJsonPath=t)},{renderNodeKey:p(({node:t})=>[m(i,{content:e.getContent(t.key),search:e.search,"data-target":"mappable","data-value":e.getJsonParameterPath(t.path),"data-name":t.key,"data-path":t.path,"data-depth":t.level,class:l({[e.$style.mappable]:e.mappingEnabled,[e.$style.dragged]:e.draggingPath===t.path})},null,8,["content","search","data-value","data-name","data-path","data-depth","class"])]),renderNodeValue:p(({node:t})=>[isNaN(t.index)?(s(),r(i,{key:0,content:e.getContent(t.content),search:e.search},null,8,["content","search"])):(s(),r(i,{key:1,content:e.getContent(t.content),search:e.search,"data-target":"mappable","data-value":e.getJsonParameterPath(t.path),"data-name":e.getListItemName(t.path),"data-path":t.path,"data-depth":t.level,class:l([{[e.$style.mappable]:e.mappingEnabled,[e.$style.dragged]:e.draggingPath===t.path},"ph-no-capture"])},null,8,["content","search","data-value","data-name","data-path","data-depth","class"]))]),_:1},8,["data","selected-value"])]),_:1},8,["disabled","onDragstart","onDragend"])],2)}const G={$style:K},Te=E(F,[["render",L],["__cssModules",G]]);export{Te as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/RunDataJsonActions-D1RkNUsx.js","assets/pinia-aUqqC48i.js","assets/n8n-_nNvRoCf.js","assets/vendor-NNwioulI.js","assets/lodash-es-5z_C16pm.js","assets/axios-s2RMMPhA.js","assets/flatted-jPn12Tq4.js","assets/esprima-next-ulPLCZ1Z.js","assets/luxon-ZRIU05qF.js","assets/@vueuse/core-8g26_cc0.js","assets/uuid-McvpxQtQ.js","assets/vue-i18n-1PEMRmUU.js","assets/@n8n/permissions-8yMqUF1Y.js","assets/n8n-y89D68g9.css","assets/jsonpath-0J1pRXgH.js","assets/index-xP-VuMjv.js","assets/@n8n/codemirror-lang-sql-feLn5IS9.js","assets/@lezer/common-1hBQ1gIF.js","assets/codemirror-lang-html-n8n-wWQLhhqk.js","assets/prettier-s3fE3Qyr.js","assets/@jsplumb/util-DR0SB56A.js","assets/@jsplumb/core-MKwKlGip.js","assets/@jsplumb/common-Q5_tv_GT.js","assets/@jsplumb/connector-bezier-3dWY17R5.js","assets/@jsplumb/browser-ui-AlqFM-P6.js","assets/codemirror-lang-n8n-expression-HpIZnV_9.js","assets/fast-json-stable-stringify-eHEaCv8s.js","assets/timeago.js--Bumj2r9.js","assets/qrcode.vue-UdCmS1Sj.js","assets/vue3-touch-events-_RfbPMOD.js","assets/chart.js-JtqvIvkt.js","assets/index-OZ0UPgDI.css","assets/NodeView-e_zfgMVH.js","assets/useExecutionDebugging-GoiwhZAw.js","assets/file-saver-GLtlGJrO.js","assets/vue-json-pretty-AIiKR_BZ.js","assets/dateFormatter-e3zTcyK4.js","assets/RunDataAi-WDp0ZlAg.js","assets/RunDataAi-lJTQYpdI.css","assets/workflowActivate-taS2Qpdq.js","assets/collaboration.store-emJMSzVB.js","assets/NodeView-KyGlaz-v.css","assets/RunDataJsonActions-ypZSidBj.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=RunDataJson-pCteLtYj.js.map
