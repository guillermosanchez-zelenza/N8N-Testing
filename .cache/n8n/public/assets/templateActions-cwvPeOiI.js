import{fM as f,V as w,a7 as m,fO as u}from"./n8n-_nNvRoCf.js";import{aF as T,aG as k,aH as y,U as E}from"./index-xP-VuMjv.js";async function C(e){const{credentialOverrides:o,nodeTypeProvider:t,rootStore:n,template:a,workflowsStore:s}=e,r=await u(n.getRestApiContext,a.name),l=y(t,a.workflow.nodes,o),i=E(l),d=a.workflow.connections,p={name:r.name,nodes:i,connections:d,active:!1,meta:{templateId:a.id.toString()}};return await s.createNewWorkflow(p)}async function N(e){const{router:o,templateId:t,inNewBrowserTab:n=!1,telemetry:a,source:s}=e;a.track("User opened cred setup",{source:s},{withPostHog:!0});const r={name:w.TEMPLATE_SETUP,params:{id:t}};if(n){const l=o.resolve(r);window.open(l.href,"_blank")}else await o.push(r)}async function c(e){const{externalHooks:o,templateId:t,templatesStore:n,inNewBrowserTab:a,router:s}=e,r={name:w.TEMPLATE_IMPORT,params:{id:t}},l={source:"workflow",template_id:m(t),wf_template_repo_session_id:n.currentSessionId};if(await o.run("templatesWorkflowView.openWorkflow",l),a){const i=s.resolve(r);window.open(i.href,"_blank")}else await s.push(r)}function P(e,o){return o.workflow.nodes.some(t=>k(e,t))}async function S(e,o){const t=e.getFullTemplateById(o);return t||(await e.fetchTemplateById(o),e.getFullTemplateById(o))}async function g(e){const{nodeTypesStore:o,posthogStore:t,templateId:n,templatesStore:a}=e;if(!t.isFeatureEnabled(f)){await c(e);return}const[r]=await Promise.all([S(a,n),o.loadNodeTypesIfNotLoaded()]);T(r),P(o,r)?await N(e):await c(e)}export{C as c,g as u};
//# sourceMappingURL=templateActions-cwvPeOiI.js.map
