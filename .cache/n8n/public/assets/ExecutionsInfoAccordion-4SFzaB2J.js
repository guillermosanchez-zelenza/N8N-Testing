import{m as h}from"./pinia-aUqqC48i.js";import{v,u as x,l as k,m as E,o as g,$ as l,d2 as i,_ as m}from"./n8n-_nNvRoCf.js";import{w as T}from"./index-xP-VuMjv.js";import{G as I,ag as a,l as C,M as _,O as t,p as u,S as s,R as n,T as c,a2 as d,I as f}from"./vendor-NNwioulI.js";const y=I({name:"ExecutionsInfoAccordion",mixins:[T],props:{initiallyExpanded:{type:Boolean,default:!1}},data(){return{defaultValues:{saveFailedExecutions:"all",saveSuccessfulExecutions:"all",saveManualExecutions:!1},workflowSaveSettings:{saveFailedExecutions:!1,saveSuccessfulExecutions:!1,saveTestExecutions:!1}}},watch:{workflowSettings(e){this.updateSettings(e)}},mounted(){this.defaultValues.saveFailedExecutions=this.settingsStore.saveDataErrorExecution,this.defaultValues.saveSuccessfulExecutions=this.settingsStore.saveDataSuccessExecution,this.defaultValues.saveManualExecutions=this.settingsStore.saveManualExecutions,this.updateSettings(this.workflowSettings)},computed:{...h(E,k,x,v),accordionItems(){return[{id:"productionExecutions",label:this.$locale.baseText("executionsLandingPage.emptyState.accordion.productionExecutions"),icon:this.productionExecutionsIcon.icon,iconColor:this.productionExecutionsIcon.color,tooltip:this.productionExecutionsStatus==="unknown"?this.$locale.baseText("executionsLandingPage.emptyState.accordion.productionExecutionsWarningTooltip"):null},{id:"manualExecutions",label:this.$locale.baseText("executionsLandingPage.emptyState.accordion.testExecutions"),icon:this.workflowSaveSettings.saveTestExecutions?"check":"times",iconColor:this.workflowSaveSettings.saveTestExecutions?"success":"danger"}]},shouldExpandAccordion(){return this.initiallyExpanded?!this.workflowSaveSettings.saveFailedExecutions||!this.workflowSaveSettings.saveSuccessfulExecutions||!this.workflowSaveSettings.saveTestExecutions:!1},productionExecutionsIcon(){return this.productionExecutionsStatus==="saving"?{icon:"check",color:"success"}:this.productionExecutionsStatus==="not-saving"?{icon:"times",color:"danger"}:{icon:"exclamation-triangle",color:"warning"}},productionExecutionsStatus(){return this.workflowSaveSettings.saveSuccessfulExecutions===this.workflowSaveSettings.saveFailedExecutions?this.workflowSaveSettings.saveSuccessfulExecutions?"saving":"not-saving":"unknown"},workflowSettings(){return g(this.workflowsStore.workflowSettings)},accordionIcon(){return!this.workflowSaveSettings.saveTestExecutions||this.productionExecutionsStatus!=="saving"?{icon:"exclamation-triangle",color:"warning"}:null},currentWorkflowId(){return this.workflowsStore.workflowId},isNewWorkflow(){return!this.currentWorkflowId||this.currentWorkflowId===l||this.currentWorkflowId==="new"},workflowName(){return this.workflowsStore.workflowName},currentWorkflowTagIds(){return this.workflowsStore.workflowTags}},methods:{updateSettings(e){this.workflowSaveSettings.saveFailedExecutions=e.saveDataErrorExecution===void 0?this.defaultValues.saveFailedExecutions==="all":e.saveDataErrorExecution==="all",this.workflowSaveSettings.saveSuccessfulExecutions=e.saveDataSuccessExecution===void 0?this.defaultValues.saveSuccessfulExecutions==="all":e.saveDataSuccessExecution==="all",this.workflowSaveSettings.saveTestExecutions=e.saveManualExecutions===void 0?this.defaultValues.saveManualExecutions:e.saveManualExecutions},onAccordionClick(e){e.target instanceof HTMLAnchorElement&&(e.preventDefault(),this.uiStore.openModal(i))},onItemTooltipClick(e,o){e==="productionExecutions"&&o.target instanceof HTMLAnchorElement&&(o.preventDefault(),this.uiStore.openModal(i))},openWorkflowSettings(e){this.uiStore.openModal(i)},async onSaveWorkflowClick(e){let o;this.currentWorkflowId!==l?o=this.currentWorkflowId:this.$route.params.name&&this.$route.params.name!=="new"&&(o=this.$route.params.name),await this.saveCurrentWorkflow({id:o,name:this.workflowName,tags:this.currentWorkflowTagIds})&&await this.settingsStore.fetchPromptsData()}}}),W="_accordion_67fqb_5",b="_disabled_67fqb_31",$={accordion:W,disabled:b},L={class:"mt-2xs"};function M(e,o,w,P,A,N){const r=a("n8n-link"),S=a("n8n-tooltip"),p=a("n8n-info-accordion");return C(),_(p,{class:f([e.$style.accordion,"mt-2xl"]),title:e.$locale.baseText("executionsLandingPage.emptyState.accordion.title"),items:e.accordionItems,"initially-expanded":e.shouldExpandAccordion,"header-icon":e.accordionIcon,"onClick:body":e.onAccordionClick,onTooltipClick:e.onItemTooltipClick},{customContent:t(()=>[u("footer",L,[s(n(e.$locale.baseText("executionsLandingPage.emptyState.accordion.footer"))+" ",1),c(S,{disabled:!e.isNewWorkflow},{content:t(()=>[u("div",null,[c(r,{onClick:d(e.onSaveWorkflowClick,["prevent"])},{default:t(()=>[s(n(e.$locale.baseText("executionsLandingPage.emptyState.accordion.footer.tooltipLink")),1)]),_:1},8,["onClick"]),s(" "+n(e.$locale.baseText("executionsLandingPage.emptyState.accordion.footer.tooltipText")),1)])]),default:t(()=>[c(r,{class:f({[e.$style.disabled]:e.isNewWorkflow}),size:"small",onClick:d(e.openWorkflowSettings,["prevent"])},{default:t(()=>[s(n(e.$locale.baseText("executionsLandingPage.emptyState.accordion.footer.settingsLink")),1)]),_:1},8,["class","onClick"])]),_:1},8,["disabled"])])]),_:1},8,["class","title","items","initially-expanded","header-icon","onClick:body","onTooltipClick"])}const D={$style:$},B=m(y,[["render",M],["__cssModules",D]]);export{B as E};
//# sourceMappingURL=ExecutionsInfoAccordion-4SFzaB2J.js.map
