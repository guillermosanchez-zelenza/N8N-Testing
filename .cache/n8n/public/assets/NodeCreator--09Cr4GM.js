import{_ as H,b as Je,a1 as re,g8 as Qe,F as ie,a5 as he,eP as xe,aW as et,bd as tt,aI as ot,x as pe,fw as $e,O as Ae,Z as Le,v as nt,f as st,eQ as te,f4 as ge,g9 as at,m as rt,eR as Ee,eS as Re,u as it,B as lt,y as ct}from"./n8n-_nNvRoCf.js";import{u as Z,a as dt,b as M,c as q,t as ut,f as pt,T as Ve,R as Me,A as Be,d as Oe}from"./NodeView-e_zfgMVH.js";import{G as P,l as p,M as S,O as I,H as F,W as De,Z as be,b as ye,y as Pe,_ as we,ag as D,m as A,p as N,T as V,I as u,Q as R,r as G,e as $,a9 as le,u as K,J as ke,a2 as me,U as He,V as Ke,K as oe,R as Y,a as Ce,d as X,al as gt,ab as ze,Y as Ue,F as yt,a7 as mt,af as ft,aN as vt,S as ee}from"./vendor-NNwioulI.js";import{m as _t,B as fe,C as We}from"./lodash-es-5z_C16pm.js";import{u as Te}from"./NodeCreation-q-9Zw2Lt.js";import{N as ce,W as Ye,X as de}from"./index-xP-VuMjv.js";import"./axios-s2RMMPhA.js";import"./flatted-jPn12Tq4.js";import"./esprima-next-ulPLCZ1Z.js";import"./luxon-ZRIU05qF.js";import"./pinia-aUqqC48i.js";import"./@vueuse/core-8g26_cc0.js";import"./uuid-McvpxQtQ.js";import"./vue-i18n-1PEMRmUU.js";import"./@n8n/permissions-8yMqUF1Y.js";import"./@jsplumb/core-MKwKlGip.js";import"./@jsplumb/util-DR0SB56A.js";import"./@jsplumb/common-Q5_tv_GT.js";import"./useExecutionDebugging-GoiwhZAw.js";import"./file-saver-GLtlGJrO.js";import"./vue-json-pretty-AIiKR_BZ.js";import"./dateFormatter-e3zTcyK4.js";import"./RunDataAi-WDp0ZlAg.js";import"./@n8n/codemirror-lang-sql-feLn5IS9.js";import"./@lezer/common-1hBQ1gIF.js";import"./codemirror-lang-html-n8n-wWQLhhqk.js";import"./prettier-s3fE3Qyr.js";import"./@jsplumb/connector-bezier-3dWY17R5.js";import"./@jsplumb/browser-ui-AlqFM-P6.js";import"./codemirror-lang-n8n-expression-HpIZnV_9.js";import"./fast-json-stable-stringify-eHEaCv8s.js";import"./timeago.js--Bumj2r9.js";import"./qrcode.vue-UdCmS1Sj.js";import"./vue3-touch-events-_RfbPMOD.js";import"./chart.js-JtqvIvkt.js";import"./workflowActivate-taS2Qpdq.js";import"./collaboration.store-emJMSzVB.js";const ht=P({name:"SlideTransition"});function $t(r,e,l,n,a,y){return p(),S(De,{name:"slide"},{default:I(()=>[F(r.$slots,"default",{},void 0,!0)]),_:3})}const bt=H(ht,[["render",$t],["__scopeId","data-v-88e2114c"]]),je="placeholder_recommended";function wt(...r){return Je.baseText(...r)}const J=_t(wt,(...r)=>JSON.stringify(r)),_e={"n8n-nodes-base.hubspotTrigger":(r,e)=>{var n,a,y;const l=(n=r==null?void 0:r.options)==null?void 0:n[0];return(y=(a=l==null?void 0:l.values[0])==null?void 0:a.options)==null?void 0:y.map(_=>({...ne(e),actionKey:_.value,displayName:J("nodeCreator.actionsCategory.onEvent",{interpolate:{event:fe(_.name)}}),description:_.description||"",displayOptions:r.displayOptions,values:{eventsUi:{eventValues:[{name:_.value}]}}}))}};function ne(r,e){const l=r.group.includes("trigger"),n=J(l?"nodeCreator.actionsCategory.triggers":"nodeCreator.actionsCategory.actions");return{name:r.name,group:r.group,codex:{label:e||"",categories:[n]},iconUrl:r.iconUrl,outputs:r.outputs,icon:r.icon,defaults:r.defaults}}function kt(r){if(r.properties.find(a=>a.name==="resource"))return[];const e=r.properties.find(a=>{var y;return((y=a.name)==null?void 0:y.toLowerCase())==="operation"});if(!(e!=null&&e.options))return[];const n=e.options.filter(a=>!["*",""," "].includes(a.name)).map(a=>({...ne(r),actionKey:a.value,displayName:a.action??fe(a.name),description:a.description??"",displayOptions:e.displayOptions,values:{[e.name]:e.type==="multiOptions"?[a.value]:a.value}}));return n.length===0?[]:n}function Ct(r){var m,i;const e=["event","events","trigger on"],l=(m=r.displayName)==null?void 0:m.toLowerCase().includes("trigger"),n=r.properties.find(t=>{var c;return e.includes((c=t.displayName)==null?void 0:c.toLowerCase())});if(!l)return[];if(!(n!=null&&n.options))return[{...ne(r),actionKey:je,displayName:J("nodeCreator.actionsCategory.onNewEvent",{interpolate:{event:r.displayName.replace("Trigger","").trimEnd()}}),description:""}];const a=n.options.filter(t=>!["*",""," "].includes(t.name));return((i=_e[r.name])==null?void 0:i.call(_e,n,r))??a.map(t=>({...ne(r),actionKey:t.value,displayName:t.action??J("nodeCreator.actionsCategory.onEvent",{interpolate:{event:fe(t.name)}}),description:t.description||"",displayOptions:n.displayOptions,values:{[n.name]:n.type==="multiOptions"?[t.value]:t.value}}))}function Tt(r){const e=[];return r.properties.filter(n=>{var a;return((a=n.displayName)==null?void 0:a.toLowerCase())==="resource"}).forEach(n=>{(n.options||[]).filter(a=>a.value!==ie).forEach((a,y,_)=>{const m=_.length===1,i=r.properties.find(c=>{var O,w,o,b,L;const C=c.name==="operation",d=((o=(w=(O=c.displayOptions)==null?void 0:O.show)==null?void 0:w.resource)==null?void 0:o.includes(a.value))||m,s=(L=(b=c.displayOptions)==null?void 0:b.show)==null?void 0:L["@version"],h=Array.isArray(r.version)?r.version:[r.version],v=s?s.some(g=>h.includes(g)):!0;return C&&d&&v});if(!(i!=null&&i.options))return;const t=(i.options||[]).map(c=>{var s;const C=c.action??`${a.name} ${fe(c.name)}`,d=m?{show:{resource:[(s=_[0])==null?void 0:s.value]}}:i==null?void 0:i.displayOptions;return{...ne(r,`${a.name} ${J("nodeCreator.actionsCategory.actions")}`),actionKey:c.value,description:(c==null?void 0:c.description)??"",displayOptions:d,values:{operation:(i==null?void 0:i.type)==="multiOptions"?[c.value]:c.value},displayName:C,group:["trigger"]}});e.push(...t)})}),e}function Nt(){function r(a){return a?[...Ct(a),...kt(a),...Tt(a)]:[]}function e(a){return a.length<=1?[]:a.filter((y,_,m)=>{if(y.actionKey===ie)return!1;const t=y.actionKey===je;return!t||t&&m.length>1})}function l(a){const{displayName:y,defaults:_,description:m,name:i,group:t,icon:c,iconUrl:C,badgeIconUrl:d,outputs:s,codex:h}=a;return{displayName:y,defaults:_,description:m,name:i,group:t,icon:c,iconUrl:C,badgeIconUrl:d,outputs:s,codex:h}}function n(a,y){const _=[...a],m={},i=[];return _.filter(t=>!t.group.includes("trigger")).forEach(t=>{const c=r(t);if(m[t.name]=c,t.name===re){const C=y.map(d=>l(Qe(t,d)));i.push(...C)}i.push(l(t))}),_.filter(t=>t.group.includes("trigger")).forEach(t=>{const c=t.name.replace("Trigger",""),C=r(t),d=(m==null?void 0:m[c])||[],s=i.find(h=>h.name===c);if(s&&(d==null?void 0:d.length)>0){const h=e([...d,...C]);m[c]=h,s.description=t.description}else m[t.name]=e(C),i.push(l(t))}),{actions:m,mergedNodes:i}}return{generateMergedNodesAndActions:n}}const It=["placeholder","value"],St=P({__name:"SearchBar",props:{placeholder:{default:""},modelValue:{default:""}},emits:["update:modelValue"],setup(r,{expose:e,emit:l}){const n=be({inputRef:null}),a=he();function y(){var t;(t=n.inputRef)==null||t.focus()}function _(t){const c=t.target;l("update:modelValue",c.value)}function m(){l("update:modelValue","")}ye(()=>{a.run("nodeCreatorSearchBar.mount",{inputRef:n.inputRef}),setTimeout(y,0)}),Pe(()=>{var t;(t=n.inputRef)==null||t.remove()});const{inputRef:i}=we(n);return e({focus:y}),(t,c)=>{const C=D("font-awesome-icon");return p(),A("div",{class:u(t.$style.searchContainer),"data-test-id":"search-bar"},[N("div",{class:u({[t.$style.prefix]:!0,[t.$style.active]:t.modelValue.length>0})},[V(C,{icon:"search",size:"sm"})],2),N("div",{class:u(t.$style.text)},[N("input",{ref_key:"inputRef",ref:i,placeholder:t.placeholder,value:t.modelValue,class:u(t.$style.input),autofocus:"","data-test-id":"node-creator-search-bar",tabindex:"0",onInput:_},null,42,It)],2),t.modelValue.length>0?(p(),A("div",{key:0,class:u(t.$style.suffix),onClick:m},[N("button",{class:u([t.$style.clear,t.$style.clickable])},[V(C,{icon:"times-circle"})],2)],2)):R("",!0)],2)}}}),At="_searchContainer_1wh9v_5",Lt="_prefix_1wh9v_21",Et="_active_1wh9v_26",Rt="_text_1wh9v_30",Vt="_suffix_1wh9v_46",Mt="_clear_1wh9v_52",Bt={searchContainer:At,prefix:Lt,active:Et,text:Rt,suffix:Vt,clear:Mt},Ot={$style:Bt},Dt=H(St,[["__cssModules",Ot]]),Pt=["innerHTML"],Ht=P({__name:"NodeItem",props:{nodeType:{},subcategory:{},active:{type:Boolean,default:!1}},setup(r){const e=r,l=pe(),n=Ae(),{actions:a}=Z(),{getAddedNodesAndConnections:y}=Te(),{isSubNodeType:_}=dt({nodeType:e.nodeType}),m=G(!1),i=G({x:-100,y:-100}),t=G(null),c=$(()=>e.subcategory===xe&&!e.nodeType.name.startsWith(et)?"":l.headerText({key:`headers.${v.value}.description`,fallback:e.nodeType.description})),C=$(()=>s.value),d=$(()=>s.value?"node-creator-action-item":"node-creator-node-item"),s=$(()=>h.value.length>1),h=$(()=>a[e.nodeType.name]||[]),v=$(()=>l.shortNodeType(e.nodeType.name)||""),O=$(()=>({top:`${i.value.y}px`,left:`${i.value.x}px`})),w=$(()=>tt(e.nodeType.name)),o=$(()=>{const f=e.nodeType.displayName.trimEnd();return l.headerText({key:`headers.${v.value}.displayName`,fallback:s.value?f.replace("Trigger",""):f})}),b=$(()=>e.nodeType.group.includes("trigger")&&!s.value);function L(f){document.body.addEventListener("dragover",g);const{pageX:j,pageY:W}=f;f.dataTransfer&&(f.dataTransfer.effectAllowed="copy",f.dataTransfer.dropEffect="copy",f.dataTransfer.setDragImage(t.value,0,0),f.dataTransfer.setData($e,JSON.stringify(y([{type:e.nodeType.name}])))),m.value=!0,i.value={x:j,y:W}}function g(f){if(!m.value||f.pageX===0&&f.pageY===0)return;const[j,W]=Ye([],[f.pageX-de/2,f.pageY-de/2]);i.value={x:j,y:W}}function T(f){document.body.removeEventListener("dragover",g),m.value=!1,setTimeout(()=>{i.value={x:-100,y:-100}},300)}function B(f){f.target.localName==="a"&&n.track("user clicked cnr docs link",{source:"nodes panel node"})}return(f,j)=>{const W=D("n8n-node-creator-node");return p(),S(W,{draggable:!C.value,class:u(f.$style.nodeItem),description:c.value,title:o.value,"show-action-arrow":C.value,"is-trigger":b.value,"data-test-id":d.value,onDragstart:L,onDragend:T},le({icon:I(()=>[K(_)?(p(),A("div",{key:0,class:u(f.$style.subNodeBackground)},null,2)):R("",!0),V(ce,{class:u(f.$style.nodeIcon),"node-type":f.nodeType},null,8,["class","node-type"])]),dragContent:I(()=>[N("div",{ref_key:"draggableDataTransfer",ref:t,class:u(f.$style.draggableDataTransfer)},null,2),Ke(N("div",{class:u(f.$style.draggable),style:ke(O.value)},[V(ce,{"node-type":f.nodeType,size:40,shrink:!1,onClickCapture:j[0]||(j[0]=me(()=>{},["stop"]))},null,8,["node-type"])],6),[[He,m.value]])]),_:2},[w.value?{name:"tooltip",fn:I(()=>[N("p",{class:u(f.$style.communityNodeIcon),onClick:B,innerHTML:K(l).baseText("generic.communityNode.tooltip",{interpolate:{packageName:f.nodeType.name.split(".")[0],docURL:K(ot)}})},null,10,Pt)]),key:"0"}:void 0]),1032,["draggable","class","description","title","show-action-arrow","is-trigger","data-test-id"])}}}),Kt="_nodeItem_da0t4_5",zt="_nodeIcon_da0t4_13",Ut="_subNodeBackground_da0t4_17",Wt="_communityNodeIcon_da0t4_27",Yt="_draggable_da0t4_31",jt="_draggableDataTransfer_da0t4_45",qt={nodeItem:Kt,nodeIcon:zt,subNodeBackground:Ut,communityNodeIcon:Wt,draggable:Yt,draggableDataTransfer:jt},Ft={$style:qt},Gt=H(Ht,[["__cssModules",Ft]]),Xt=P({__name:"SubcategoryItem",props:{item:{}},setup(r){const e=r,l=pe(),n=$(()=>We(e.item.subcategory||e.item.title));return(a,y)=>{const _=D("n8n-node-icon"),m=D("n8n-node-creator-node");return p(),S(m,{class:u(a.$style.subCategory),title:K(l).baseText(`nodeCreator.subcategoryNames.${n.value}`),"is-trigger":!1,description:K(l).baseText(`nodeCreator.subcategoryDescriptions.${n.value}`),"show-action-arrow":!0},{icon:I(()=>[V(_,oe({type:"icon",name:a.item.icon,circle:!1,"show-tooltip":!1},a.item.iconProps),null,16,["name"])]),_:1},8,["class","title","description"])}}}),Zt="_subCategory_1js79_5",Jt={subCategory:Zt},Qt={$style:Jt},xt=H(Xt,[["__cssModules",Qt]]),eo=["textContent"],to=P({__name:"LabelItem",props:{item:{}},setup(r){return(e,l)=>(p(),A("div",{class:u(e.$style.label)},[N("span",{class:u(e.$style.name),textContent:Y(e.item.key)},null,10,eo)],2))}}),oo="_label_92wv5_5",no={label:oo},so={$style:no},ao=H(to,[["__cssModules",so]]),ro=P({__name:"ActionItem",props:{nodeType:{},action:{}},setup(r){const e=r,l=Ce(),n=l==null?void 0:l.proxy.$telemetry,{getActionData:a,getAddedNodesAndConnections:y,setAddedNodeActionParameters:_}=Te(),{activeViewStack:m}=M(),i=be({dragging:!1,draggablePosition:{x:-100,y:-100},storeWatcher:null,draggableDataTransfer:null}),t=$(()=>({top:`${i.draggablePosition.y}px`,left:`${i.draggablePosition.x}px`})),c=$(()=>a(e.action)),C=w=>{var o;return((o=w.name)==null?void 0:o.toLowerCase().includes("trigger"))||w.name===Le};function d(w){document.body.addEventListener("dragover",s);const{pageX:o,pageY:b}=w;w.dataTransfer&&c.value.key&&(w.dataTransfer.effectAllowed="copy",w.dataTransfer.dropEffect="copy",w.dataTransfer.setDragImage(i.draggableDataTransfer,0,0),w.dataTransfer.setData($e,JSON.stringify(y([{type:c.value.key}]))),n&&(i.storeWatcher=_(c.value,n,m.rootView)),document.body.addEventListener("dragend",h)),i.dragging=!0,i.draggablePosition={x:o,y:b}}function s(w){if(!i.dragging||w.pageX===0&&w.pageY===0)return;const[o,b]=Ye([],[w.pageX-de/2,w.pageY-de/2]);i.draggablePosition={x:o,y:b}}function h(w){i.storeWatcher&&i.storeWatcher(),document.body.removeEventListener("dragend",h),document.body.removeEventListener("dragover",s),i.dragging=!1,setTimeout(()=>{i.draggablePosition={x:-100,y:-100}},300)}const{draggableDataTransfer:v,dragging:O}=we(i);return(w,o)=>{const b=D("n8n-node-creator-node");return p(),S(b,{draggable:"",class:u(w.$style.action),title:w.action.displayName,"is-trigger":C(w.action),"data-keyboard-nav":"true",onDragstart:d,onDragend:h},{dragContent:I(()=>[N("div",{ref_key:"draggableDataTransfer",ref:v,class:u(w.$style.draggableDataTransfer)},null,2),Ke(N("div",{class:u(w.$style.draggable),style:ke(t.value)},[V(ce,{"node-type":w.nodeType,size:40,shrink:!1,onClickCapture:o[0]||(o[0]=me(()=>{},["stop"]))},null,8,["node-type"])],6),[[He,K(O)]])]),icon:I(()=>[V(ce,{"node-type":w.action},null,8,["node-type"])]),_:1},8,["class","title","is-trigger"])}}}),io="_action_vsx3h_5",lo="_nodeIcon_vsx3h_17",co="_draggable_vsx3h_21",uo="_draggableDataTransfer_vsx3h_35",po={action:io,nodeIcon:lo,draggable:co,draggableDataTransfer:uo},go={$style:po},yo=H(ro,[["__cssModules",go]]),mo=P({__name:"ViewItem",props:{view:{}},setup(r){return(e,l)=>{const n=D("n8n-node-icon"),a=D("n8n-node-creator-node");return p(),S(a,{class:u(e.$style.view),title:e.view.title,tag:e.view.tag,"is-trigger":!1,description:e.view.description,"show-action-arrow":!0},{icon:I(()=>[V(n,{type:"icon",name:e.view.icon,circle:!1,"show-tooltip":!1},null,8,["name"])]),_:1},8,["class","title","tag","description"])}}}),fo="_view_5t09j_5",vo={view:fo},_o={$style:vo},ho=H(mo,[["__cssModules",_o]]),$o=["textContent"],bo=P({__name:"CategoryItem",props:{expanded:{type:Boolean,default:!0},active:{type:Boolean},count:{},name:{},isTrigger:{type:Boolean}},setup(r){const e=r,l=$(()=>{const n=e.count||0;return n>0?`${e.name} (${n})`:e.name});return(n,a)=>{const y=D("font-awesome-icon");return p(),A("div",oe({class:n.$style.categoryWrapper},n.$attrs,{"data-keyboard-nav":"true","data-test-id":"node-creator-category-item"}),[N("div",{class:u({[n.$style.category]:!0,[n.$style.active]:n.active})},[N("span",{class:u(n.$style.name)},[N("span",{textContent:Y(l.value)},null,8,$o),n.isTrigger?(p(),S(y,{key:0,icon:"bolt",size:"xs",class:u(n.$style.triggerIcon)},null,8,["class"])):R("",!0),F(n.$slots,"default")],2),n.expanded?(p(),S(y,{key:0,icon:"chevron-down",class:u(n.$style.arrow)},null,8,["class"])):(p(),S(y,{key:1,class:u(n.$style.arrow),icon:"chevron-up"},null,8,["class"]))],2)],16)}}}),wo="_triggerIcon_jzfdi_5",ko="_category_jzfdi_10",Co="_active_jzfdi_31",To="_name_jzfdi_35",No="_arrow_jzfdi_40",Io={triggerIcon:wo,category:ko,active:Co,name:To,arrow:No},So={$style:Io},Ao=H(bo,[["__cssModules",So]]),Lo=["data-category-collapsed"],Eo=["innerHTML"],Ro=P({__name:"CategorizedItemsRenderer",props:{elements:{default:()=>[]},category:{},disabled:{type:Boolean},activeIndex:{},isTriggerCategory:{type:Boolean},mouseOverTooltip:{},expanded:{type:Boolean}},setup(r){const e=r,l=Ce(),{popViewStack:n}=M(),{registerKeyHook:a}=q(),{workflowId:y}=nt(),_=$(()=>{var s;return(s=q())==null?void 0:s.activeItemId}),m=$(()=>e.elements.filter(({type:s})=>s==="action").length),i=G(e.expanded??!1);function t(){c(!i.value)}function c(s){i.value=s,i.value&&(l==null||l.proxy.$telemetry.trackNodesPanel("nodeCreateList.onCategoryExpanded",{category_name:e.category,workflow_id:y}))}function C(){i.value||c(!0)}function d(){if(!i.value){n();return}c(!1)}return X(()=>e.elements,()=>{c(!0)}),a(`CategoryRight_${e.category}`,{keyboardKeys:["ArrowRight"],condition:(s,h)=>s==="category"&&e.category===h,handler:C}),a(`CategoryToggle_${e.category}`,{keyboardKeys:["Enter"],condition:(s,h)=>s==="category"&&e.category===h,handler:t}),a(`CategoryLeft_${e.category}`,{keyboardKeys:["ArrowLeft"],condition:(s,h)=>s==="category"&&e.category===h,handler:d}),(s,h)=>{const v=D("n8n-icon"),O=D("n8n-tooltip");return p(),A("div",{class:u(s.$style.categorizedItemsRenderer),"data-category-collapsed":!i.value},[V(Ao,{class:u(s.$style.categoryItem),name:s.category,disabled:s.disabled,active:_.value===s.category,count:m.value,expanded:i.value,"is-trigger":s.isTriggerCategory,"data-keyboard-nav-type":"category","data-keyboard-nav-id":s.category,onClick:t},{default:I(()=>[s.mouseOverTooltip?(p(),A("span",{key:0,class:u(s.$style.mouseOverTooltip)},[V(O,{placement:"top","popper-class":s.$style.tooltipPopper},{content:I(()=>[N("div",{innerHTML:s.mouseOverTooltip},null,8,Eo)]),default:I(()=>[V(v,{icon:"question-circle",size:"small"})]),_:1},8,["popper-class"])],2)):R("",!0)]),_:1},8,["class","name","disabled","active","count","expanded","is-trigger","data-keyboard-nav-id"]),i.value&&m.value>0&&s.$slots.default?(p(),A("div",{key:0,class:u(s.$style.contentSlot)},[F(s.$slots,"default")],2)):R("",!0),i.value?(p(),S(Ne,oe({key:1},s.$attrs,{elements:s.elements,"is-trigger":s.isTriggerCategory}),{default:I(()=>[]),empty:I(()=>[F(s.$slots,"empty",ze(gt({elements:s.elements})))]),_:3},16,["elements","is-trigger"])):R("",!0)],10,Lo)}}}),Vo="_mouseOverTooltip_omnnb_5",Mo="_categorizedItemsRenderer_omnnb_13",Bo="_tooltipPopper_omnnb_17",Oo="_contentSlot_omnnb_21",Do={mouseOverTooltip:Vo,categorizedItemsRenderer:Mo,tooltipPopper:Bo,contentSlot:Oo},Po={$style:Do},ue=H(Ro,[["__cssModules",Po]]),Ho={key:0},Ko=["data-keyboard-nav-type","data-keyboard-nav-id","onClick"],zo=20,Uo=5,Wo=P({__name:"ItemsRenderer",props:{elements:{default:()=>[]},activeIndex:{},disabled:{type:Boolean},lazyRender:{type:Boolean,default:!0}},emits:["selected","dragstart","dragend"],setup(r,{emit:e}){const l=r,n=G([]),a=G(0),y=$(()=>{var d;return(d=q())==null?void 0:d.activeItemId});function _(){if(l.elements.length<=zo||!l.lazyRender){n.value=l.elements;return}n.value.length<l.elements.length&&(n.value.push(...l.elements.slice(n.value.length,n.value.length+Uo)),a.value=window.requestAnimationFrame(_))}function m(d,s,h){l.disabled||e(d,s,h)}function i(d){d.style.height="0"}function t(d){d.style.height=`${d.scrollHeight}px`}function c(d){d.style.height=`${d.scrollHeight}px`}function C(d){d.style.height="0"}return ye(()=>{_()}),Ue(()=>{window.cancelAnimationFrame(a.value),n.value=[]}),X(()=>l.elements,()=>{window.cancelAnimationFrame(a.value),n.value=[],_()}),(d,s)=>{const h=D("n8n-loading");return d.elements.length>0?(p(),A("div",{key:0,class:u(d.$style.itemsRenderer),name:"accordion",onBeforeEnter:i,onEnter:t,onBeforeLeave:c,onLeave:C},[F(d.$slots,"default"),(p(!0),A(yt,null,mt(d.elements,v=>(p(),A("div",{key:v.uuid},[n.value.includes(v)?(p(),A("div",Ho,[v.type==="section"?(p(),S(ue,{key:0,elements:v.children,expanded:"",category:v.title,onSelected:s[0]||(s[0]=O=>m("selected",O))},null,8,["elements","category"])):(p(),A("div",{key:1,ref_for:!0,ref:"iteratorItems",class:u({clickable:!d.disabled,[d.$style.active]:y.value===v.uuid,[d.$style.iteratorItem]:!0,[d.$style[v.type]]:!0}),"data-test-id":"item-iterator-item","data-keyboard-nav-type":v.type!=="label"?v.type:void 0,"data-keyboard-nav-id":v.uuid,onClick:O=>m("selected",v)},[v.type==="label"?(p(),S(ao,{key:0,item:v},null,8,["item"])):R("",!0),v.type==="subcategory"?(p(),S(xt,{key:1,item:v.properties},null,8,["item"])):R("",!0),v.type==="node"?(p(),S(Gt,{key:2,"node-type":v.properties,active:!0,subcategory:v.subcategory},null,8,["node-type","subcategory"])):R("",!0),v.type==="action"?(p(),S(yo,{key:3,"node-type":v.properties,action:v.properties,active:!0},null,8,["node-type","action"])):v.type==="view"?(p(),S(ho,{key:4,view:v.properties,class:u(d.$style.viewItem)},null,8,["view","class"])):R("",!0)],10,Ko))])):(p(),S(h,{key:1,loading:!0,rows:1,variant:"p",class:u(d.$style.itemSkeleton)},null,8,["class"]))]))),128))],34)):(p(),A("div",{key:1,class:u(d.$style.empty)},[F(d.$slots,"empty")],2))}}}),Yo="_itemSkeleton_mfosb_5",jo="_iteratorItem_mfosb_9",qo="_label_mfosb_21",Fo="_category_mfosb_21",Go="_active_mfosb_24",Xo="_empty_mfosb_28",Zo="_itemsRenderer_mfosb_32",Jo="_view_mfosb_41",Qo={itemSkeleton:Yo,iteratorItem:jo,label:qo,category:Fo,active:Go,empty:Xo,itemsRenderer:Zo,view:Jo},xo={$style:Qo},Ne=H(Wo,[["__cssModules",xo]]),en=["innerHTML"],tn=["innerHTML"],on=["innerHTML"],nn=["innerHTML"],sn=["onClick","innerHTML"],an=P({__name:"ActionsMode",emits:{nodeTypeSelected:r=>!0},setup(r,{emit:e}){const l=Ce(),n=l==null?void 0:l.proxy.$telemetry,{userActivated:a}=st(),{popViewStack:y,updateCurrentViewStack:_}=M(),{registerKeyHook:m}=q(),{getNodeTypesWithManualTrigger:i,setAddedNodeActionParameters:t,getActionData:c,getPlaceholderTriggerActions:C,parseCategoryActions:d,actionsCategoryLocales:s}=Te(),h=$(()=>se(b.value,s.value.triggers,!1)),v=$(()=>se(b.value,s.value.actions,!L.value)),O=$(()=>se(M().activeViewStack.baselineItems||[],s.value.triggers,!1)),w=$(()=>se(M().activeViewStack.baselineItems||[],s.value.actions,!L.value)),o=$(()=>h.value.length||L.value?s.value.triggers:`${s.value.triggers} (${B.length})`),b=$(()=>(M().activeViewStack.items||[]).filter(k=>k.properties.actionKey!==ie)),L=$(()=>M().activeViewStack.search),g=$(()=>M().activeViewStack.subcategory),T=$(()=>M().activeViewStack.rootView),B=C(g.value||""),f=$(()=>d(M().activeViewStack.baselineItems||[],s.value.triggers,!L.value).length===0),j=$(()=>(M().activeViewStack.baselineItems||[]).some(z=>(z.properties.actionKey??"")===ie)),W=$(()=>T.value===te);m("ActionsKeyRight",{keyboardKeys:["ArrowRight","Enter"],condition:k=>k==="action",handler:Fe}),m("ActionsKeyLeft",{keyboardKeys:["ArrowLeft"],condition:k=>k==="action",handler:qe});function se(k,E,z=!1){return d(k,E,z)}function qe(){y()}function Fe(k){const z=[...b.value,...B].find(U=>U.uuid===k);z&&ae(z)}function ae(k){const E=c(k.properties);if(B.some(U=>U.key===k.key)&&W.value){const U=b.value[0].key;e("nodeTypeSelected",[E.key,U])}else e("nodeTypeSelected",[E.key]);n&&t(E,n,T.value)}function Ge(){var Q,x,Se;const k=M().activeViewStack,E=(Q=k.baselineItems||[])==null?void 0:Q.filter(ve=>ve.key.toLowerCase().includes("trigger")).length,U={app_identifier:[...b.value,...B][0].key,actions:(x=k.baselineItems||[])==null?void 0:x.map(ve=>ve.properties.displayName),regular_action_count:((Se=k.baselineItems||[])==null?void 0:Se.length)-E,trigger_action_count:E};he().run("nodeCreateList.onViewActions",U),n==null||n.trackNodesPanel("nodeCreateList.onViewActions",U)}function Ie(){_({search:""})}function Xe(){const k={name:"",key:re,value:{authentication:"predefinedCredentialType"}};e("nodeTypeSelected",[re]),n&&t(k);const E=b.value[0].key;he().run("nodeCreateList.onActionsCustmAPIClicked",{app_identifier:E}),n==null||n.trackNodesPanel("nodeCreateList.onActionsCustmAPIClicked",{app_identifier:E})}const Ze=P({props:{rootView:{type:String}},setup(k,{slots:E}){return()=>{var z,U,Q,x;return ft("div",{},k.rootView===ge?[(z=E.actions)==null?void 0:z.call(E),(U=E.triggers)==null?void 0:U.call(E)]:[(Q=E.triggers)==null?void 0:Q.call(E),(x=E.actions)==null?void 0:x.call(E)])}}});return ye(()=>{Ge()}),(k,E)=>{const z=D("n8n-callout"),U=D("n8n-info-tip");return p(),A("div",{class:u(k.$style.container)},[V(K(Ze),{"root-view":T.value},le({_:2},[W.value||O.value.length!==0?{name:"triggers",fn:I(()=>[V(ue,{elements:h.value,category:o.value,"mouse-over-tooltip":k.$locale.baseText("nodeCreator.actionsTooltip.triggersStartWorkflow"),"is-trigger-category":"",expanded:W.value||v.value.length===0,onSelected:ae},le({_:2},[f.value?{name:"empty",fn:I(()=>[f.value?(p(),S(z,{key:0,theme:"info",iconless:"",slim:"","data-test-id":"actions-panel-no-triggers-callout"},{default:I(()=>[N("span",{innerHTML:k.$locale.baseText("nodeCreator.actionsCallout.noTriggerItems",{interpolate:{nodeName:g.value}})},null,8,en)]),_:1})):R("",!0),V(Ne,{elements:K(B),onSelected:ae},null,8,["elements"])]),key:"0"}:{name:"empty",fn:I(()=>[N("p",{class:u(k.$style.resetSearch),onClick:Ie,innerHTML:k.$locale.baseText("nodeCreator.actionsCategory.noMatchingTriggers")},null,10,["innerHTML"])]),key:"1"}]),1032,["elements","category","mouse-over-tooltip","expanded"])]),key:"0"}:void 0,!W.value||w.value.length!==0?{name:"actions",fn:I(()=>[V(ue,{elements:v.value,category:K(s).actions,"mouse-over-tooltip":k.$locale.baseText("nodeCreator.actionsTooltip.actionsPerformStep"),expanded:!W.value||h.value.length===0,onSelected:ae},{empty:I(()=>[L.value?(p(),A("p",{key:1,class:u(k.$style.resetSearch),"data-test-id":"actions-panel-no-matching-actions",onClick:Ie,innerHTML:k.$locale.baseText("nodeCreator.actionsCategory.noMatchingActions")},null,10,nn)):(p(),S(U,{key:0,theme:"info",type:"note",class:u(k.$style.actionsEmpty)},{default:I(()=>[N("span",{innerHTML:k.$locale.baseText("nodeCreator.actionsCallout.noActionItems",{interpolate:{nodeName:g.value}})},null,8,on)]),_:1},8,["class"]))]),default:I(()=>[!K(a)&&W.value?(p(),S(z,{key:0,theme:"info",iconless:"",slim:"","data-test-id":"actions-panel-activation-callout"},{default:I(()=>[N("span",{innerHTML:k.$locale.baseText("nodeCreator.actionsCallout.triggersStartWorkflow")},null,8,tn)]),_:1})):R("",!0)]),_:1},8,["elements","category","mouse-over-tooltip","expanded"])]),key:"1"}:void 0]),1032,["root-view"]),j.value?(p(),A("div",{key:0,class:u(k.$style.apiHint)},[N("span",{onClick:me(Xe,["prevent"]),innerHTML:k.$locale.baseText("nodeCreator.actionsList.apiCall",{interpolate:{node:g.value}})},null,8,sn)],2)):R("",!0)],2)}}}),rn="_container_1tz2w_5",ln="_resetSearch_1tz2w_11",cn="_actionsEmpty_1tz2w_25",dn="_apiHint_1tz2w_33",un={container:rn,resetSearch:ln,actionsEmpty:cn,apiHint:dn},pn={$style:un},gn=H(an,[["__cssModules",pn]]),yn={},mn={width:"75px",height:"75px",viewBox:"0 0 75 75",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},fn=vt('<title>no-nodes-keyart</title><g id="Nodes-panel-prototype-V2.1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="nodes-panel-(component)" transform="translate(-2085.000000, -352.000000)"><g id="nodes_panel" transform="translate(1880.000000, 151.000000)"><g id="Panel" transform="translate(50.000000, 0.000000)"><g id="Group-3" transform="translate(105.000000, 171.000000)"><g id="no-nodes-keyart" transform="translate(50.000000, 30.000000)"><rect id="Rectangle" x="0" y="0" width="75" height="75"></rect><g id="Group" transform="translate(6.562500, 8.164062)" fill="#C4C8D1" fill-rule="nonzero"><polygon id="Rectangle" transform="translate(49.192016, 45.302553) rotate(-45.000000) translate(-49.192016, -45.302553) " points="44.5045606 32.0526802 53.8794707 32.0526802 53.8794707 58.5524261 44.5045606 58.5524261"></polygon><path id="Path" d="M48.125,23.0859375 C54.15625,23.0859375 59.0625,18.1796875 59.0625,12.1484375 C59.0625,10.3359375 58.5625,8.6484375 57.78125,7.1484375 L49.34375,15.5859375 L44.6875,10.9296875 L53.125,2.4921875 C51.625,1.7109375 49.9375,1.2109375 48.125,1.2109375 C42.09375,1.2109375 37.1875,6.1171875 37.1875,12.1484375 C37.1875,13.4296875 37.4375,14.6484375 37.84375,15.7734375 L32.0625,21.5546875 L26.5,15.9921875 L28.71875,13.7734375 L24.3125,9.3671875 L30.9375,2.7421875 C27.28125,-0.9140625 21.34375,-0.9140625 17.6875,2.7421875 L6.625,13.8046875 L11.03125,18.2109375 L2.21875,18.2109375 L1.38777878e-15,20.4296875 L11.0625,31.4921875 L13.28125,29.2734375 L13.28125,20.4296875 L17.6875,24.8359375 L19.90625,22.6171875 L25.46875,28.1796875 L2.3125,51.3359375 L8.9375,57.9609375 L44.5,22.4296875 C45.625,22.8359375 46.84375,23.0859375 48.125,23.0859375 Z"></path></g></g></g></g></g></g></g>',2),vn=[fn];function _n(r,e){return p(),A("svg",mn,vn)}const hn=H(yn,[["render",_n]]),$n=["textContent"],bn=["textContent"],wn=P({__name:"NoResults",props:{showIcon:{type:Boolean},showRequest:{type:Boolean},rootView:{}},setup(r){return(e,l)=>{const n=D("n8n-link"),a=D("font-awesome-icon");return p(),A("div",{class:u({[e.$style.noResults]:!0,[e.$style.iconless]:!e.showIcon}),"data-test-id":"node-creator-no-results"},[e.showIcon?(p(),A("div",{key:0,class:u(e.$style.icon)},[V(hn)],2)):R("",!0),N("div",{class:u(e.$style.title)},[F(e.$slots,"title"),N("p",{textContent:Y(e.$locale.baseText("nodeCreator.noResults.weDidntMakeThatYet"))},null,8,$n),N("div",{class:u(e.$style.action)},[ee(Y(e.$locale.baseText("nodeCreator.noResults.dontWorryYouCanProbablyDoItWithThe"))+" ",1),e.rootView===K(ge)?(p(),S(n,{key:0,onClick:l[0]||(l[0]=y=>e.$emit("addHttpNode"))},{default:I(()=>[ee(Y(e.$locale.baseText("nodeCreator.noResults.httpRequest")),1)]),_:1})):R("",!0),e.rootView===K(te)?(p(),S(n,{key:1,onClick:l[1]||(l[1]=y=>e.$emit("addWebhookNode"))},{default:I(()=>[ee(Y(e.$locale.baseText("nodeCreator.noResults.webhook")),1)]),_:1})):R("",!0),ee(" "+Y(e.$locale.baseText("nodeCreator.noResults.node")),1)],2)],2),e.showRequest?(p(),A("div",{key:1,class:u(e.$style.request)},[N("p",{textContent:Y(e.$locale.baseText("nodeCreator.noResults.wantUsToMakeItFaster"))},null,8,bn),N("div",null,[V(n,{to:K(at)},{default:I(()=>[N("span",null,Y(e.$locale.baseText("nodeCreator.noResults.requestTheNode")),1),ee("  "),N("span",null,[V(a,{class:u(e.$style.external),icon:"external-link-alt",title:e.$locale.baseText("nodeCreator.noResults.requestTheNode")},null,8,["class","title"])])]),_:1},8,["to"])])],2)):R("",!0)],2)}}}),kn="_noResults_1jje6_5",Cn="_title_1jje6_18",Tn="_action_1jje6_27",Nn="_request_1jje6_28",In="_icon_1jje6_44",Sn="_external_1jje6_50",An={noResults:kn,title:Cn,action:Tn,request:Nn,icon:In,external:Sn},Ln={$style:An},En=H(wn,[["__cssModules",Ln]]),Rn=P({__name:"NodesMode",emits:{nodeTypeSelected:r=>!0},setup(r,{emit:e}){const l=pe(),n=Ae(),{mergedNodes:a,actions:y}=Z(),{baseUrl:_}=rt(),{pushViewStack:m,popViewStack:i}=M(),{registerKeyHook:t}=q(),c=$(()=>M().activeViewStack),C=$(()=>M().globalSearchItemsDiff);function d(o){e("nodeTypeSelected",o)}function s(o){var b,L;if(o.type==="subcategory"){const g=We(o.properties.title),T=l.baseText(`nodeCreator.subcategoryNames.${g}`);m({subcategory:o.key,title:T,mode:"nodes",...o.properties.icon?{nodeIcon:{icon:o.properties.icon,iconType:"icon"}}:{},...o.properties.panelClass?{panelClass:o.properties.panelClass}:{},rootView:c.value.rootView,forceIncludeNodes:o.properties.forceIncludeNodes,baseFilter:v,itemsMapper:h,sections:o.properties.sections}),n.trackNodesPanel("nodeCreateList.onSubcategorySelected",{subcategory:o.key})}if(o.type==="node"){const g=(y==null?void 0:y[o.key])||[];if(g.length<=1){d([o.key]);return}const T=o.properties.iconUrl?`${_}${o.properties.iconUrl}`:(b=o.properties.icon)==null?void 0:b.split(":")[1],B=g==null?void 0:g.map(f=>ut(f,o.properties.displayName,"action"));m({subcategory:o.properties.displayName,title:o.properties.displayName,nodeIcon:{color:((L=o.properties.defaults)==null?void 0:L.color)||"",icon:T,iconType:o.properties.iconUrl?"file":"icon"},rootView:c.value.rootView,hasSearch:!0,mode:"actions",items:B})}if(o.type==="view"){const g={[te]:Ve,[ge]:Me,[Ee]:Be,[Re]:Oe},T=o.key,B=g[T];if(!B){console.warn(`No view found for ${T}`);return}const f=B(a);m({title:f.title,subtitle:(f==null?void 0:f.subtitle)??"",info:(f==null?void 0:f.info)??"",items:f.items,hasSearch:!0,rootView:f.value,mode:"nodes",searchItems:a})}}function h(o){var T,B;if(o.type!=="node")return o;const b=o.properties.group.includes("trigger"),g=((y==null?void 0:y[o.key])||[]).length>0;return b&&g&&((T=o.properties)!=null&&T.codex&&(o.properties.codex.alias=[...((B=o.properties.codex)==null?void 0:B.alias)||[],o.properties.displayName]),o.properties.displayName=o.properties.displayName.replace(" Trigger","")),o}function v(o){if(o.type==="section")return!0;if(o.type!=="node")return!1;const b=o.properties.group.includes("trigger"),g=((y==null?void 0:y[o.key])||[]).length>0;return c.value.rootView===te?g||b:g||!b}function O(){i()}function w(o){const L=pt([...c.value.items??[],...C.value??[]]).find(g=>g.uuid===o);L&&s(L)}return t("MainViewArrowRight",{keyboardKeys:["ArrowRight","Enter"],condition:o=>["subcategory","node","view"].includes(o),handler:w}),t("MainViewArrowLeft",{keyboardKeys:["ArrowLeft"],condition:o=>["subcategory","node","view"].includes(o),handler:O}),(o,b)=>(p(),A("span",null,[V(Ne,{elements:c.value.items,class:u(o.$style.items),onSelected:s},le({_:2},[(c.value.items||[]).length===0&&C.value.length===0?{name:"empty",fn:I(()=>[V(En,{"root-view":c.value.rootView,"show-icon":"","show-request":"",onAddWebhookNode:b[0]||(b[0]=L=>d([K(Le)])),onAddHttpNode:b[1]||(b[1]=L=>d([K(re)]))},null,8,["root-view"])]),key:"0"}:void 0]),1032,["elements","class"]),C.value.length>0?(p(),S(ue,{key:0,elements:C.value,category:o.$locale.baseText("nodeCreator.categoryNames.otherCategories"),onSelected:s},null,8,["elements","category"])):R("",!0)]))}}),Vn="_items_1t7lf_5",Mn={items:Vn},Bn={$style:Mn},On=H(Rn,[["__cssModules",Bn]]),Dn=["textContent"],Pn=["textContent"],Hn=P({__name:"NodesListPanel",setup(r){const e=pe(),{mergedNodes:l}=Z(),{pushViewStack:n,popViewStack:a,updateCurrentViewStack:y}=M(),{setActiveItemIndex:_,attachKeydownEvent:m,detachKeydownEvent:i}=q(),t=$(()=>M().activeViewStack),c=$(()=>M().viewStacks),C=$(()=>M().activeViewStackMode==="actions"),d=$(()=>C.value?e.baseText("nodeCreator.actionsCategory.searchActions",{interpolate:{node:t.value.title}}):e.baseText("nodeCreator.searchBar.searchNodes")),s=$(()=>Z().selectedView);function h(o=""){return t.value.activeIndex?t.value.activeIndex:t.value.mode==="actions"?1:t.value.sections?o?0:1:0}function v(o){t.value.uuid&&(y({search:o}),_(h(o)))}function O(){_(h())}ye(()=>{m(),_(h())}),Ue(()=>{i()}),X(()=>s.value,o=>{const b={[te]:Ve,[ge]:Me,[Ee]:Be,[Re]:Oe},L=o,g=b[L];if(!g){console.warn(`No view found for ${L}`);return}const T=g(l);n({title:T.title,subtitle:(T==null?void 0:T.subtitle)??"",items:T.items,info:T.info,hasSearch:!0,mode:"nodes",rootView:o,searchItems:l})},{immediate:!0});function w(){a()}return(o,b)=>{const L=D("font-awesome-icon"),g=D("n8n-node-icon"),T=D("n8n-notice");return c.value.length>0?(p(),S(De,{key:0,name:`panel-slide-${t.value.transitionDirection}`,onAfterLeave:O},{default:I(()=>[(p(),A("aside",{key:`${t.value.uuid}`,class:u([o.$style.nodesListPanel,t.value.panelClass]),onKeydownCapture:b[0]||(b[0]=me(()=>{},["stop"]))},[N("header",{class:u({[o.$style.header]:!0,[o.$style.hasBg]:!t.value.subtitle,"nodes-list-panel-header":!0}),"data-test-id":"nodes-list-header"},[N("div",{class:u(o.$style.top)},[c.value.length>1&&!t.value.preventBack?(p(),A("button",{key:0,class:u(o.$style.backButton),onClick:w},[V(L,{class:u(o.$style.backButtonIcon),icon:"arrow-left",size:"2x"},null,8,["class"])],2)):R("",!0),t.value.nodeIcon?(p(),S(g,{key:1,class:u(o.$style.nodeIcon),type:t.value.nodeIcon.iconType||"unknown",src:t.value.nodeIcon.icon,name:t.value.nodeIcon.icon,color:t.value.nodeIcon.color,circle:!1,"show-tooltip":!1,size:20},null,8,["class","type","src","name","color"])):R("",!0),t.value.title?(p(),A("p",{key:2,class:u(o.$style.title),textContent:Y(t.value.title)},null,10,Dn)):R("",!0)],2),t.value.subtitle?(p(),A("p",{key:0,class:u({[o.$style.subtitle]:!0,[o.$style.offsetSubtitle]:c.value.length>1}),textContent:Y(t.value.subtitle)},null,10,Pn)):R("",!0)],2),t.value.hasSearch?(p(),S(Dt,{key:0,class:u(o.$style.searchBar),placeholder:d.value?d.value:o.$locale.baseText("nodeCreator.searchBar.searchNodes"),"model-value":t.value.search,"onUpdate:modelValue":v},null,8,["class","placeholder","model-value"])):R("",!0),N("div",{class:u(o.$style.renderedItems)},[t.value.info&&!t.value.search?(p(),S(T,{key:0,class:u(o.$style.info),content:t.value.info,theme:"warning"},null,8,["class","content"])):R("",!0),C.value&&t.value.subcategory?(p(),S(gn,ze(oe({key:1},o.$attrs)),null,16)):(p(),S(On,oe({key:2,"root-view":s.value},o.$attrs),null,16,["root-view"]))],2)],34))]),_:1},8,["name"])):R("",!0)}}}),Kn="_info_tt5pd_27",zn="_backButton_tt5pd_31",Un="_backButtonIcon_tt5pd_38",Wn="_nodeIcon_tt5pd_44",Yn="_renderedItems_tt5pd_49",jn="_searchBar_tt5pd_61",qn="_nodesListPanel_tt5pd_65",Fn="_footer_tt5pd_83",Gn="_top_tt5pd_94",Xn="_header_tt5pd_99",Zn="_hasBg_tt5pd_105",Jn="_title_tt5pd_110",Qn="_subtitle_tt5pd_120",xn="_offsetSubtitle_tt5pd_128",es={info:Kn,backButton:zn,backButtonIcon:Un,nodeIcon:Wn,renderedItems:Yn,searchBar:jn,nodesListPanel:qn,footer:Fn,top:Gn,header:Xn,hasBg:Zn,title:Jn,subtitle:Qn,offsetSubtitle:xn},ts={$style:es},os=H(Hn,[["__cssModules",ts]]),ns=P({__name:"NodeCreator",props:{active:{type:Boolean},onNodeTypeSelected:{type:Function}},emits:["closeNodeCreator","nodeTypeSelected"],setup(r,{emit:e}){const l=r,{resetViewStacks:n}=M(),{registerKeyHook:a}=q(),y=it(),{setShowScrim:_,setActions:m,setMergeNodes:i}=Z(),{generateMergedNodesAndActions:t}=Nt(),c=be({nodeCreator:null,mousedownInsideEvent:null}),C=$(()=>Z().showScrim),d=$(()=>M().viewStacks.length),s=$(()=>({top:`${y.bannersHeight+y.headerHeight}px`}));function h(){var g;if(c.mousedownInsideEvent){const T=new MouseEvent("click",{bubbles:!0,cancelable:!0});(g=c.mousedownInsideEvent.target)==null||g.dispatchEvent(T),c.mousedownInsideEvent=null,v()}}function v(){document.removeEventListener("mouseup",h),document.removeEventListener("touchstart",h)}function O(){c.mousedownInsideEvent=null,v()}function w(g){c.mousedownInsideEvent=g,document.addEventListener("mouseup",h),document.addEventListener("touchstart",h)}function o(g){g.preventDefault()}function b(g){if(!g.dataTransfer)return;const T=g.dataTransfer.getData($e),B=c.nodeCreator.getBoundingClientRect();T&&g.pageX>=B.x&&g.pageY>=B.y&&g.stopPropagation()}X(()=>l.active,g=>{g||(_(!1),n())}),X(d,g=>{g===0&&(e("closeNodeCreator"),_(!1))}),a("NodeCreatorCloseEscape",{keyboardKeys:["Escape"],handler:()=>e("closeNodeCreator")}),a("NodeCreatorCloseTab",{keyboardKeys:["Tab"],handler:()=>e("closeNodeCreator")}),X(()=>({httpOnlyCredentials:lt().httpOnlyCredentialTypes,nodeTypes:ct().visibleNodeTypes}),({nodeTypes:g,httpOnlyCredentials:T})=>{const{actions:B,mergedNodes:f}=t(g,T);m(B),i(f)},{immediate:!0});const{nodeCreator:L}=we(c);return Pe(()=>{v()}),(g,T)=>(p(),A("div",null,[N("aside",{class:u({[g.$style.nodeCreatorScrim]:!0,[g.$style.active]:C.value})},null,2),V(bt,null,{default:I(()=>[g.active?(p(),A("div",{key:0,ref_key:"nodeCreator",ref:L,class:u(g.$style.nodeCreator),style:ke(s.value),"data-test-id":"node-creator",onDragover:o,onDrop:b,onMousedown:w,onMouseup:O},[V(os,{onNodeTypeSelected:g.onNodeTypeSelected},null,8,["onNodeTypeSelected"])],38)):R("",!0)]),_:1})]))}}),ss="_nodeCreator_cvzgl_9",as="_nodeCreatorScrim_cvzgl_20",rs="_active_cvzgl_32",is={nodeCreator:ss,nodeCreatorScrim:as,active:rs},ls={$style:is},qs=H(ns,[["__cssModules",ls]]);export{qs as default};
//# sourceMappingURL=NodeCreator--09Cr4GM.js.map
