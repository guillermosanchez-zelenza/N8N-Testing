import{fL as N,fK as S,_}from"./n8n-_nNvRoCf.js";import{N as V}from"./NodeList-_14w6OPV.js";import{aB as E}from"./index-xP-VuMjv.js";import{G as C,ag as i,l as o,m as t,I as a,T as r,O as f,S as k,R as u,Q as n,M as w,a2 as L,p as U,F as h,a7 as g}from"./vendor-NNwioulI.js";const z=C({name:"TemplateCard",components:{TimeAgo:E,NodeList:V},props:{lastItem:{type:Boolean,default:!1},firstItem:{type:Boolean,default:!1},workflow:{type:Object},useWorkflowButton:{type:Boolean},loading:{type:Boolean},simpleView:{type:Boolean,default:!1}},data(){return{nodesToBeShown:5}},methods:{filterTemplateNodes:N,abbreviateNumber:S,countNodesToBeSliced(e){return e.length>this.nodesToBeShown?this.nodesToBeShown-1:this.nodesToBeShown},onUseWorkflowClick(e){this.$emit("useWorkflow",e)},onCardClick(e){this.$emit("click",e)}}}),I="_nodes_akyr5_5",M="_icon_akyr5_12",H="_card_akyr5_16",O="_hideOnHover_akyr5_28",A="_buttonContainer_akyr5_31",R="_loaded_akyr5_42",F="_first_akyr5_46",j="_last_akyr5_52",D="_content_akyr5_57",G="_line_akyr5_62",K="_loading_akyr5_68",Q="_nodesContainer_akyr5_73",q={nodes:I,icon:M,card:H,hideOnHover:O,buttonContainer:A,loaded:R,first:F,last:j,content:D,line:G,loading:K,nodesContainer:Q},J={key:1},P={key:0};function X(e,s,y,$,B,b){const p=i("n8n-loading"),c=i("n8n-heading"),l=i("font-awesome-icon"),d=i("n8n-text"),m=i("TimeAgo"),v=i("NodeList"),T=i("n8n-button");return o(),t("div",{class:a([e.$style.card,e.lastItem&&e.$style.last,e.firstItem&&e.$style.first,!e.loading&&e.$style.loaded]),"data-test-id":"template-card",onClick:s[0]||(s[0]=(...W)=>e.onCardClick&&e.onCardClick(...W))},[e.loading?(o(),t("div",{key:0,class:a(e.$style.loading)},[r(p,{rows:2,"shrink-last":!1,loading:e.loading},null,8,["loading"])],2)):(o(),t("div",J,[r(c,{bold:!0,size:"small"},{default:f(()=>[k(u(e.workflow.name),1)]),_:1}),e.simpleView?n("",!0):(o(),t("div",{key:0,class:a(e.$style.content)},[e.workflow.totalViews?(o(),t("span",P,[r(d,{size:"small",color:"text-light"},{default:f(()=>[r(l,{icon:"eye"}),k(" "+u(e.abbreviateNumber(e.workflow.totalViews)),1)]),_:1})])):n("",!0),e.workflow.totalViews?(o(),t("div",{key:1,class:a(e.$style.line),textContent:"|"},null,2)):n("",!0),r(d,{size:"small",color:"text-light"},{default:f(()=>[r(m,{date:e.workflow.createdAt},null,8,["date"])]),_:1}),e.workflow.user?(o(),t("div",{key:2,class:a(e.$style.line),textContent:"|"},null,2)):n("",!0),e.workflow.user?(o(),w(d,{key:3,size:"small",color:"text-light"},{default:f(()=>[k("By "+u(e.workflow.user.username),1)]),_:1})):n("",!0)],2))])),e.loading?n("",!0):(o(),t("div",{key:2,class:a([e.$style.nodesContainer,e.useWorkflowButton&&e.$style.hideOnHover])},[e.workflow.nodes?(o(),w(v,{key:0,nodes:e.workflow.nodes,limit:e.nodesToBeShown,size:"md"},null,8,["nodes","limit"])):n("",!0)],2)),e.useWorkflowButton?(o(),t("div",{key:3,class:a(e.$style.buttonContainer)},[e.useWorkflowButton?(o(),w(T,{key:0,outline:"",label:"Use workflow","data-test-id":"use-workflow-button",onClick:L(e.onUseWorkflowClick,["stop"])},null,8,["onClick"])):n("",!0)],2)):n("",!0)],2)}const Y={$style:q},Z=_(z,[["render",X],["__cssModules",Y]]),x=C({name:"TemplateList",components:{TemplateCard:Z},props:{infiniteScrollEnabled:{type:Boolean,default:!1},loading:{type:Boolean},useWorkflowButton:{type:Boolean,default:!1},workflows:{type:Array,default:()=>[]},totalWorkflows:{type:Number,default:0},simpleView:{type:Boolean,default:!1},totalCount:{type:Number,default:0}},mounted(){if(this.infiniteScrollEnabled){const e=document.getElementById("content");e&&e.addEventListener("scroll",this.onScroll)}},beforeUnmount(){const e=document.getElementById("content");e&&e.removeEventListener("scroll",this.onScroll)},methods:{onScroll(){const e=this.$refs.loader;if(!e||this.loading)return;const s=e.getBoundingClientRect();s.top>=0&&s.left>=0&&s.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&s.right<=(window.innerWidth||document.documentElement.clientWidth)&&this.$emit("loadMore")},onCardClick(e,s){this.$emit("openTemplate",{event:e,id:s})},onUseWorkflow(e,s){this.$emit("useWorkflow",{event:e,id:s})}}}),ee="_header_cr9gx_5",oe="_workflowButton_cr9gx_9",te="_button_cr9gx_9",ne="_nodes_cr9gx_12",se={header:ee,workflowButton:oe,button:te,nodes:ne},le={key:0,"data-test-id":"template-count-label"},ae=["textContent"],ie={key:0,ref:"loader"},re={key:1,"data-test-id":"templates-loading-container"};function de(e,s,y,$,B,b){const p=i("n8n-heading"),c=i("TemplateCard");return e.loading||e.workflows.length?(o(),t("div",{key:0,class:a(e.$style.list)},[e.simpleView?n("",!0):(o(),t("div",{key:0,class:a(e.$style.header)},[r(p,{bold:!0,size:"medium",color:"text-light"},{default:f(()=>[k(u(e.$locale.baseText("templates.workflows"))+" ",1),e.totalCount>0?(o(),t("span",le,"("+u(e.totalCount)+")",1)):n("",!0),!e.loading&&e.totalWorkflows?(o(),t("span",{key:1,textContent:u(`(${e.totalWorkflows})`)},null,8,ae)):n("",!0)]),_:1})],2)),U("div",{class:a(e.$style.container)},[(o(!0),t(h,null,g(e.workflows,(l,d)=>(o(),w(c,{key:l.id,workflow:l,"first-item":d===0,"simple-view":e.simpleView,"last-item":d===e.workflows.length-1&&!e.loading,"use-workflow-button":e.useWorkflowButton,onClick:m=>e.onCardClick(m,l.id),onUseWorkflow:m=>e.onUseWorkflow(m,l.id)},null,8,["workflow","first-item","simple-view","last-item","use-workflow-button","onClick","onUseWorkflow"]))),128)),e.infiniteScrollEnabled?(o(),t("div",ie,null,512)):n("",!0),e.loading?(o(),t("div",re,[(o(),t(h,null,g(4,l=>r(c,{key:"index-"+l,loading:!0,"first-item":e.workflows.length===0&&l===1,"last-item":l===4},null,8,["first-item","last-item"])),64))])):n("",!0)],2)],2)):n("",!0)}const ue={$style:se},we=_(x,[["render",de],["__cssModules",ue]]);export{we as T};
//# sourceMappingURL=TemplateList-l63ZcdEV.js.map
